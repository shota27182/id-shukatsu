/*!
 * froala_editor v3.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],e):e(t.FroalaEditor)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t,Object.assign(t.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),Object.assign(t.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),t.PLUGINS.forms=function(t){function e(){t.selection.clear(),d(this).data("mousedown",!0)}function o(t){d(this).data("mousedown")&&(t.stopPropagation(),d(this).removeData("mousedown"),s(f=this)),t.preventDefault()}function n(){t.$el.find("input, textarea, button").removeData("mousedown")}function a(){d(this).removeData("mousedown")}function i(){return f||null}function s(e){if(-1==["checkbox","radio"].indexOf(e.type)){var o=t.popups.get("forms.edit");o||(o=function(){var e="";0<t.opts.formEditButtons.length&&(e='<div class="fr-buttons">'.concat(t.button.buildList(t.opts.formEditButtons),"</div>"));var o={buttons:e},n=t.popups.create("forms.edit",o);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){i()&&t.popups.isVisible("forms.edit")&&s(i())}),n}());var n=d(f=e);t.popups.refresh("forms.edit"),t.popups.setContainer("forms.edit",t.$sc);var a=n.offset().left+n.outerWidth()/2,u=n.offset().top+n.outerHeight();t.popups.show("forms.edit",a,u,n.outerHeight())}}function u(){var e=t.popups.get("forms.update"),o=i();if(o){var n=d(o);n.is("button")?e.find('input[type="text"][name="text"]').val(n.text()):n.is("input[type=button]")||n.is("input[type=submit]")||n.is("input[type=reset]")?e.find('input[type="text"][name="text"]').val(n.val()):e.find('input[type="text"][name="text"]').val(n.attr("placeholder"))}e.find('input[type="text"][name="text"]').trigger("change")}function r(){f=null}function p(e){if(e)return t.popups.onRefresh("forms.update",u),t.popups.onHide("forms.update",r),!0;var o="";1<=t.opts.formUpdateButtons.length&&(o='<div class="fr-buttons">'.concat(t.button.buildList(t.opts.formUpdateButtons),"</div>"));var n=0,a={buttons:o,text_layer:'<div class="fr-forms-text-layer fr-layer fr-active"> \n    <div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex=" '.concat(++n,' "></div>\n    <div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="').concat(2,'" type="button">').concat(t.language.translate("Update"),"</button></div></div>")};return t.popups.create("forms.update",a)}var f,d=t.$;return{_init:function(){t.events.$on(t.$el,t._mousedown,"input, textarea, button",e),t.events.$on(t.$el,t._mouseup,"input, textarea, button",o),t.events.$on(t.$el,"touchmove","input, textarea, button",a),t.events.$on(t.$el,t._mouseup,n),t.events.$on(t.$win,t._mouseup,n),p(!0),t.events.$on(t.$el,"submit","form",function(t){return t.preventDefault(),!1})},updateInput:function(){var e=t.popups.get("forms.update"),o=i();if(o){var n=d(o),a=e.find('input[type="text"][name="text"]').val()||"";n.is("button")?a.length?n.text(a):n.text("\u200b"):-1!=["button","submit","reset"].indexOf(o.type)?n.attr("value",a):n.attr("placeholder",a),t.popups.hide("forms.update"),s(o)}},getInput:i,applyStyle:function(e,o,n){void 0===o&&(o=t.opts.formStyles),void 0===n&&(n=t.opts.formMultipleStyles);var a=i();if(!a)return!1;if(!n){var s=Object.keys(o);s.splice(s.indexOf(e),1),d(a).removeClass(s.join(" "))}d(a).toggleClass(e)},showUpdatePopup:function(){var e=i();if(e){var o=d(e),n=t.popups.get("forms.update");n||(n=p()),t.popups.isVisible("forms.update")||t.popups.refresh("forms.update"),t.popups.setContainer("forms.update",t.$sc);var a=o.offset().left+o.outerWidth()/2,s=o.offset().top+o.outerHeight();t.popups.show("forms.update",a,s,o.outerHeight())}},showEditPopup:s,back:function(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var e=i();e&&t.$wp&&("BUTTON"===e.tagName&&t.selection.restore(),s(e))}}},t.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),t.DefineIcon("inputStyle",{NAME:"magic",SVG_KEY:"inlineStyle"}),t.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var t='<ul class="fr-dropdown-list">',e=this.opts.formStyles;for(var o in e)e.hasOwnProperty(o)&&(t+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'.concat(o,'">').concat(this.language.translate(e[o]),"</a></li>"));return t+"</ul>"},callback:function(t,e){var o=this.forms.getInput();o&&(this.forms.applyStyle(e),this.forms.showEditPopup(o))},refreshOnShow:function(t,e){var o=this.$,n=this.forms.getInput();if(n){var a=o(n);e.find(".fr-command").each(function(){var t=o(this).data("param1");o(this).toggleClass("fr-active",a.hasClass(t))})}}}),t.DefineIcon("inputEdit",{NAME:"edit",SVG_KEY:"edit"}),t.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),t.DefineIcon("inputBack",{NAME:"arrow-left",SVG_KEY:"back"}),t.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),t.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}})});