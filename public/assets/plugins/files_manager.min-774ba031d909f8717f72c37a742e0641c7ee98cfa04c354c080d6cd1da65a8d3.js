/*!
 * froala_editor v3.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=e&&e.hasOwnProperty("default")?e["default"]:e,Object.assign(e.POPUP_TEMPLATES,{"filesManager.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_PROGRESS_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Object.assign(e.DEFAULTS,{filesInsertButtons:["imageBack","|","filesUpload","filesByURL","filesEmbed"],filesInsertButtons2:["deleteAll","insertAll","cancel","minimize"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,filesManagerUploadURL:null,imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,filesManagerUploadParam:"file",filesManagerUploadParams:{},googleOptions:{},filesManagerUploadToS3:!1,filesManagerUploadToAzure:!1,filesManagerUploadMethod:"POST",filesManagerMaxSize:10485760,filesManagerAllowedTypes:["*"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5,imageAddNewLine:!1}),e.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1?$2",html:'<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],e.VIDEO_EMBED_REGEX=/^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i,e.IMAGE_EMBED_REGEX=/^\W*((<img(.|\n)*>(\s|\n)*))\W*$/i,e.PLUGINS.filesManager=function(i){function n(){var e=i.popups.get("filesManager.insert"),t=e.find(".fr-files-by-url-layer input");t.val(""),e.find(".fr-files-embed-layer textarea").val("").trigger("change"),t.trigger("change")}function a(e){var t;i.hasOwnProperty("imageTUI")||(Le="fr-disabled"),Pe.forEach(function(e,t){v(t)}),r()?(t=i.popups.get("filesManager.insert"))||(t=J()):(t=i.popups.get("filesManager.insert"))||(t=function(){var e='<div class="fr-buttons fr-tabs">'.concat(i.button.buildList(i.opts.fileInsertButtons),"</div>"),t="<div style= 'padding:10px'>\n    <div class = 'fr-message'><h3 style ='font-size: 16px; margin: 10px 10px;font-weight: normal;'>".concat(i.language.translate(function(){var e="",t=function(){var e=[];return Ye.forEach(function(t){i.opts.pluginsEnabled.indexOf(t)<0&&e.push(t.charAt(0).toUpperCase()+t.slice(1))}),e}();return e=t.join(", "),1<t.length?e+=" plugin are":e+=" plugin is",e}()+" not enabled. Do you want to enable?"),"</h3></div>\n    <div style='text-align:right;'>\n      <button class='fr-trim-button fr-plugins-enable'>").concat(i.language.translate("Enable"),"</button>               \n      <button class='fr-trim-button fr-plugins-cancel'>").concat(i.language.translate("Cancel"),"</button>\n    </div>"),n={buttons:e,upload_layer:t,by_url_layer:"",embed_layer:"",upload_progress_layer:"",progress_bar:""},a=i.popups.create("filesManager.insert",n);return Y(a),a}());var n=i.$tb.find('.fr-command[data-cmd="insertFiles"]');if(y(),e||!t.hasClass("fr-active"))if(e||h(),i.popups.refresh("filesManager.insert"),i.popups.setContainer("filesManager.insert",i.$tb),n.isVisible()){var a=i.button.getPosition(n,De.size),s=a.left,o=a.top;i.popups.show("filesManager.insert",s,o,n.outerHeight())}else i.position.forSelection(t),i.popups.show("filesManager.insert");i.popups.setPopupDimensions(t),r()&&i.popups.setFileListHeight(t),t.find(".fr-upload-progress")&&0==De.size&&t.find(".fr-upload-progress").addClass("fr-none")}function r(){var e=!0;return Ye.forEach(function(t){i.opts.pluginsEnabled.indexOf(t)<0&&(e=!1)}),e}function s(){y()}function o(){if(Ae||function(){var t;if(i.shared.$image_resizer?(Ae=i.shared.$image_resizer,Ie=i.shared.$img_overlay,i.events.on("destroy",function(){Se("body").first().append(Ae.removeClass("fr-active"))},!0)):(i.shared.$image_resizer=Se(document.createElement("div")).attr("class","fr-image-resizer"),Ae=i.shared.$image_resizer,i.events.$on(Ae,"mousedown",function(e){e.stopPropagation()},!0),i.opts.imageResize&&(Ae.append(l("nw")+l("ne")+l("sw")+l("se")),i.shared.$img_overlay=Se(document.createElement("div")).attr("class","fr-image-overlay"),Ie=i.shared.$img_overlay,t=Ae.get(0).ownerDocument,Se(t).find("body").first().append(Ie))),i.events.on("shared.destroy",function(){Ae.html("").removeData().remove(),Ae=null,i.opts.imageResize&&(Ie.remove(),Ie=null)},!0),i.helpers.isMobile()||i.events.$on(Se(i.o_win),"resize",function(){Me&&!Me.hasClass("fr-uploading")?me(!0):Me&&(o(),replace(),b(!1))}),i.opts.imageResize){t=Ae.get(0).ownerDocument,i.events.$on(Ae,i._mousedown,".fr-handler",f),i.events.$on(Se(t),i._mousemove,c),i.events.$on(Se(t.defaultView||t.parentWindow),i._mouseup,p),i.events.$on(Ie,"mouseleave",p);var n=1,a=null,r=0;i.events.on("keydown",function(t){if(Me){var s=-1!=navigator.userAgent.indexOf("Mac OS X")?t.metaKey:t.ctrlKey,o=t.which;(o!==a||200<t.timeStamp-r)&&(n=1),(o==e.KEYCODE.EQUALS||i.browser.mozilla&&o==e.KEYCODE.FF_EQUALS)&&s&&!t.altKey?n=se.call(this,t,1,1,n):(o==e.KEYCODE.HYPHEN||i.browser.mozilla&&o==e.KEYCODE.FF_HYPHEN)&&s&&!t.altKey?n=se.call(this,t,2,-1,n):i.keys.ctrlKey(t)||o!=e.KEYCODE.ENTER||(Me.before("<br>"),D(Me)),a=o,r=t.timeStamp}},!0),i.events.on("keyup",function(){n=1})}}(),!Me)return!1;var t=i.$wp||i.$sc;t.append(Ae),Ae.data("instance",i);var n=t.scrollTop()-("static"!=t.css("position")?t.offset().top:0),a=t.scrollLeft()-("static"!=t.css("position")?t.offset().left:0);a-=i.helpers.getPX(t.css("border-left-width")),n-=i.helpers.getPX(t.css("border-top-width")),i.$el.is("img")&&i.$sc.is("body")&&(a=n=0);var r=we();xe()&&(r=r.find(".fr-img-wrap"));var s=0,d=0;i.opts.iframe&&(s=i.helpers.getPX(i.$wp.find(".fr-iframe").css("padding-top")),d=i.helpers.getPX(i.$wp.find(".fr-iframe").css("padding-left"))),Ae.css("top",(i.opts.iframe?r.offset().top+s:r.offset().top+n)-1).css("left",(i.opts.iframe?r.offset().left+d:r.offset().left+a)-1).css("width",r.get(0).getBoundingClientRect().width).css("height",r.get(0).getBoundingClientRect().height).addClass("fr-active")}function l(e){return'<div class="fr-handler fr-h'.concat(e,'"></div>')}function d(e){xe()?Me.parents(".fr-img-caption").css("width",e):Me.css("width",e)}function f(e){if(!i.core.sameInstance(Ae))return!0;if(e.preventDefault(),e.stopPropagation(),i.$el.find("img.fr-error").left)return!1;i.undo.canDo()||i.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var n=i.$oel.get(0).ownerDocument,a=n.defaultView||n.parentWindow,r=!1;try{r=a.location!=a.parent.location&&!(a.$&&a.$.FE)}catch(Le){}r&&a.frameElement&&(t+=i.helpers.getPX(Se(a.frameElement).offset().left)+a.frameElement.clientLeft)}(ke=Se(this)).data("start-x",t),ke.data("start-width",Me.width()),ke.data("start-height",Me.height());var s=Me.width();if(i.opts.imageResizeWithPercent){var o=Me.parentsUntil(i.$el,i.html.blockTagsQuery()).get(0)||i.el;s=(s/Se(o).outerWidth()*100).toFixed(2)+"%"}d(s),Ie.show(),i.popups.hideAll(),he()}function c(e){if(!i.core.sameInstance(Ae))return!0;var t;if(ke&&Me){if(e.preventDefault(),i.$el.find("img.fr-error").left)return!1;var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!n)return!1;var a=n-ke.data("start-x"),r=ke.data("start-width");if((ke.hasClass("fr-hnw")||ke.hasClass("fr-hsw"))&&(a=0-a),i.opts.imageResizeWithPercent){var s=Me.parentsUntil(i.$el,i.html.blockTagsQuery()).get(0)||i.el;r=((r+a)/Se(s).outerWidth()*100).toFixed(2),i.opts.imageRoundPercent&&(r=Math.round(r)),d("".concat(r,"%")),(t=xe()?(i.helpers.getPX(Me.parents(".fr-img-caption").css("width"))/Se(s).outerWidth()*100).toFixed(2):(i.helpers.getPX(Me.css("width"))/Se(s).outerWidth()*100).toFixed(2))===r||i.opts.imageRoundPercent||d("".concat(t,"%")),Me.css("height","").removeAttr("height")}else r+a>=i.opts.imageMinWidth&&(d(r+a),t=xe()?i.helpers.getPX(Me.parents(".fr-img-caption").css("width")):i.helpers.getPX(Me.css("width"))),t!==r+a&&d(t),((Me.attr("style")||"").match(/(^height:)|(; *height:)/)||Me.attr("height"))&&(Me.css("height",ke.data("start-height")*Me.width()/ke.data("start-width")),Me.removeAttr("height"));o(),i.events.trigger("image.resize",[ye()])}}function p(e){if(!i.core.sameInstance(Ae))return!0;if(ke&&Me){if(e&&e.stopPropagation(),i.$el.find("img.fr-error").left)return!1;ke=null,Ie.hide(),o(),i.undo.saveStep(),i.events.trigger("image.resizeEnd",[ye()])}else Ae.removeClass("fr-active")}function g(){Pe.forEach(function(e,t){var n=i.popups.get("filesManager.insert");n.find(".fr-checkbox-file-"+t).get(0).disabled=!0,document.getElementById("fr-file-autoplay-button-"+t)&&(document.getElementById("fr-file-autoplay-button-"+t).disabled=!0,document.getElementById("fr-file-autoplay-button-"+t).parentElement.classList.add("fr-checkbox-disabled"),document.getElementById("fr-file-autoplay-button-"+t).parentElement.classList.remove("fr-files-checkbox")),n.find(".fr-checkbox-"+t).get(0).classList.remove("fr-files-checkbox"),n.find(".fr-checkbox-"+t).get(0).classList.add("fr-checkbox-disabled")})}function u(e,t,n,a){i.edit.on(),Me&&Me.addClass("fr-error"),et[e]?(e!=Xe&&e!=Ge&&e!=je||T(100,a,!0),Pe.set(a,et[e]),g(),Pe.forEach(function(e,t){i.popups.get("filesManager.insert"),document.getElementById("fr-file-edit-button-".concat(t))&&(document.getElementById("fr-file-edit-button-".concat(t)).classList.add("fr-disabled"),document.getElementById("fr-file-view-button-".concat(t)).classList.add("fr-disabled"),document.getElementById("fr-file-insert-button-".concat(t)).classList.add("fr-disabled"))}),M(i.language.translate(et[e]),a)):M(i.language.translate("Something went wrong. Please try again."),a),!Me&&n&&oe(n),i.events.trigger("filesManager.error",[{code:e,message:et[e]},t,n])}function m(){var e=i.popups.get("filesManager.insert"),t=e.find('.fr-command[data-cmd="insertAll"]'),n=e.find('.fr-command[data-cmd="deleteAll"]'),a=!0;$e.forEach(function(e,t){$e.get(t)&&(a=!1)}),a?t.addClass("fr-disabled"):t.removeClass("fr-disabled"),a?n.addClass("fr-disabled"):n.removeClass("fr-disabled")}function v(e){Ue.get(e)&&Ue.get(e).link&&i.events.trigger("filesManager.removed",[Ue.get(e).link]);var t=i.popups.get("filesManager.insert");t.find(".fr-file-"+e).get(0)!==undefined&&(t.find(".fr-file-"+e).get(0).outerHTML=""),Ue["delete"](e),De["delete"](e),$e["delete"](e),m(),0==De.size&&(Ve=0),Pe["delete"](e),i.popups.setPopupDimensions(t,!0),i.opts.toolbarBottom?a(!0):i.popups.setPopupDimensions(t),t.find(".fr-upload-progress")&&0==De.size&&t.find(".fr-upload-progress").addClass("fr-none")}function h(){for(var e=i.popups.get("filesManager.insert"),t=e.find(".fr-insert-checkbox"),n=0;n<t.length;n++)t.get(n).children.target.checked=!1,e.find(".fr-file-"+t.get(n).id.split("-").pop()).get(0).classList.add("fr-unchecked");if(Ce)document.getElementById("fr-file-autoplay-button-".concat(Ce))&&(document.getElementById("fr-file-autoplay-button-".concat(Ce)).checked=!1),Ke=Ke.filter(function(e){return e!=Ce});else{for(var a=e.find(".fr-file-autoplay-button"),r=0;r<a.length;r++)a.get(r).checked=!1;Ke=[]}$e=new Map,m()}function b(e){var t=i.popups.get("filesManager.insert");if(t||(t=J()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-files-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),Me){var n=we();i.popups.setContainer("filesManager.insert",i.$sc);var a=n.offset().left,r=n.offset().top+n.height();i.popups.show("filesManager.insert",a,r,n.outerHeight())}void 0===e&&w(i.language.translate("Uploading"),0)}function y(e){var t=i.popups.get("filesManager.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-files-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||i.$el.find("img.fr-error").length)){if(i.events.focus(),i.$el.find("img.fr-error").length&&(i.$el.find("img.fr-error").remove(),i.undo.saveStep(),i.undo.run(),i.undo.dropRedo()),!i.$wp&&Me){var n=Me;me(!0),i.selection.setAfter(n.get(0)),i.selection.restore()}i.popups.hide("filesManager.insert")}}function w(e,t){var n=i.popups.get("filesManager.insert");if(n){var a=n.find(".fr-files-progress-bar-layer");a.find("h3").text(e+(t?" ".concat(t,"%"):"")),a.removeClass("fr-error"),t?(a.find("div").removeClass("fr-indeterminate"),a.find("div > span").css("width","".concat(t,"%"))):a.find("div").addClass("fr-indeterminate")}}function x(e){b();var t=i.popups.get("filesManager.insert").find(".fr-files-progress-bar-layer");t.addClass("fr-error");var n=t.find("h3");n.text(e),i.events.disableBlur(),n.focus()}function M(e,t){var n=i.popups.get("filesManager.insert"),a=n.find(".fr-upload-progress-layer"),r=n.find(".fr-file-".concat(t));a.addClass("fr-error"),r.find("h5").text(e)}function E(e){ct=e,tt=document.getElementsByClassName(e),Array.prototype.map.call(tt,function(e){!function(e){(e.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),it=e.pageX,nt=e.pageY;var t=document.getElementById("filesList");nt+20>t.getBoundingClientRect().bottom&&C(t,0,10),nt-20<t.getBoundingClientRect().top&&C(t,0,-10)},!1),i.helpers.isMobile())&&e.getElementsByClassName("dot")[0].addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation();for(var t=e.target;t&&!t.classList.contains(ct);)t=t.parentElement;for(var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY);i&&!i.classList.contains(ct);)i=i.parentElement;var n=document.getElementsByClassName("fr-hovered-over-file");Array.prototype.forEach.call(n,function(e){e.classList.remove("fr-hovered-over-file")}),i&&!t.classList.contains("fr-unchecked")&&i.classList.add("fr-hovered-over-file");var a=document.getElementById("filesList");e.targetTouches[0].clientY+5>a.getBoundingClientRect().bottom&&C(a,0,5),e.targetTouches[0].clientY-5<a.getBoundingClientRect().top&&C(a,0,-5)},!1);if(e.ondrag=A,e.ondragend=k,i.helpers.isMobile()){var t=e.getElementsByClassName("dot");t[0].addEventListener("touchmove",A,!1),t[0].addEventListener("touchend",k,!1)}}(e)})}function C(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function A(e){for(i.helpers.isMobile()&&(rt=event.touches[0].clientX,st=event.touches[0].clientY),at=e.target;!at.classList.contains(ct);)at=at.parentElement;at.classList.contains(ct)&&!at.classList.contains("fr-unchecked")?i.helpers.isMobile()&&at.classList.add("drag-sort-active"):at=undefined}function k(){var e;if(at!==undefined){var t,n;if(i.helpers.isMobile())for(t=rt,n=st,e=event.target;!e.classList.contains(ct);)e=e.parentElement;else t=event.clientX,n=event.clientY;i.helpers.isMobile()||!i.browser.safari&&!i.browser.mozilla||(t=it,n=nt);for(var a=document.elementFromPoint(t,n);a&&!a.classList.contains(ct);)a=a.parentElement;a&&!a.classList.contains(ct)?a=undefined:a&&at!==a&&function(e,t){var i,n,a=e.parentNode,r=t.parentNode;if(a&&r&&!a.isEqualNode(t)&&!r.isEqualNode(e)){for(var s=0;s<a.children.length;s++)a.children[s].isEqualNode(e)&&(i=s);for(s=0;s<r.children.length;s++)r.children[s].isEqualNode(t)&&(n=s);a.isEqualNode(r)&&i<n&&n++,a.insertBefore(t,a.children[i]),r.insertBefore(e,r.children[n])}}(at,a),i.helpers.isMobile()&&(e.classList.remove("fr-hovered-over-file"),a.classList.remove("fr-hovered-over-file"))}}function I(e){var t=i.popups.get("filesManager.insert");t.find(".fr-upload-progress-layer").hasClass("fr-active")||t.find(".fr-upload-progress-layer").addClass("fr-active"),t.find(".fr-upload-progress").removeClass("fr-none");var n=De.get(e),r=function(e){var n,a={weekday:"long",year:"numeric",month:"long",day:"numeric"};try{n=e.toLocaleDateString(i.opts.language?i.opts.language:undefined,a)}catch(t){n=e.toLocaleDateString(undefined,a)}return n+""}(new Date),s=$e.get(e)?"":"fr-unchecked ",o="\n        <div id='fr-file-".concat(e,"' class='fr-file-list-item fr-file-").concat(e," ").concat(s,"' draggable = \"").concat(!s,'" >\n        <div class=\'fr-file-item-left\' >\n\n    \n            <div class="fr-file-item-insert-checkbox fr-files-checkbox-line">\n            ').concat(i.helpers.isMobile()?"<div id='fr-pick-".concat(e,"}' class='dot'>\n            </div>"):"",'\n            <div id="checkbox-key-').concat(e,'" class="fr-files-checkbox fr-insert-checkbox  fr-checkbox-').concat(e,'">\n            <input name="target" class="fr-insert-attr fr-checkbox-file-').concat(e,' fr-file-insert-check" data-cmd="fileInsertCheckbox"\n             data-checked="_blank" type="checkbox" id="fr-link-target-').concat(i.id,'" tabIndex="0" />\n            <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>','\n            </span>\n        </div>\n                <label id="fr-label-target-').concat(i.id,"\"></label>\n            </div>\n    \n            <div class='fr-file-item-icon fr-file-item-icon-").concat(e,"' >\n                <img src='https://secure.webtoolhub.com/static/resources/icons/set112/f2afb6f7.png' alt='Image preview' class='thumbnail-padding' height='36px' width='36px' />\n            </div>\n\n            <div class='fr-file-item-description' >\n                <div class='fr-file-name fr-files-manager-tooltip'>\n                   ").concat(function(e,t,i){return null==t&&(t=100),null==i&&(i="..."),e.length>t?e.substring(0,t-i.length)+i:e}(n.name,20),'\n                      <span class="').concat(20<n.name.length?"tooltiptext":"fr-none",'">').concat(n.name,"\n                      </span>\n                 </div>\n                 <div class='fr-file-details'>\n                 <div class='fr-file-date'>").concat(r,"\n                 </div>\n \n                 <div class='fr-file-size'>\n                     ").concat(function(e){if(0==e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return" | "+1*(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t]}(n.size),"\n                 </div>\n                 </div>\n\n                  <div class='fr-file-error'>\n                    <h5 class='fr-file-error-h5'></h5>\n                 </div>\n             </div>\n    \n        </div>\n\n        <div class='fr-file-item-right fr-file-item-right-").concat(e,"'>")+S(e)+"</div>\n    </div>";t.find(".fr-upload-progress-layer")[0].innerHTML=o+t.find(".fr-upload-progress-layer")[0].innerHTML,De.forEach(function(e,i){$e.get(i)&&t.find("input.fr-insert-attr.fr-checkbox-file-".concat(i))[0].setAttribute("checked",null)}),Ke.forEach(function(e){document.getElementById("fr-file-autoplay-button-"+e).checked=!0}),_(e,n),y(),i.opts.toolbarBottom?a(!0):i.popups.setPopupDimensions(t),E("fr-file-list-item")}function L(e){switch(e){case"application/msword":return i.icon.getFileIcon("docIcon");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return i.icon.getFileIcon("docxIcon");case"image/gif":return i.icon.getFileIcon("gifIcon");case"image/jpeg":return i.icon.getFileIcon("jpegIcon");case"image/jpeg":return i.icon.getFileIcon("jpgIcon");case"type/text":return i.icon.getFileIcon("logIcon");case"video/quicktime":return i.icon.getFileIcon("movIcon");case"audio/mp3":case"audio/mpeg":return i.icon.getFileIcon("mp3Icon");case"video/mp4":return i.icon.getFileIcon("mp4Icon");case"audio/ogg":return i.icon.getFileIcon("oggIcon");case"video/ogg":return i.icon.getFileIcon("ogvIcon");case"application/pdf":return i.icon.getFileIcon("pdfIcon");case"image/png":return i.icon.getFileIcon("pngIcon");case"text/plain":return i.icon.getFileIcon("txtIcon");case"video/webm":return i.icon.getFileIcon("webmIcon");case"image/webp":return i.icon.getFileIcon("webpIcon");case"video/x-ms-wmv":return i.icon.getFileIcon("wmvIcon");case"application/vnd.ms-excel":return i.icon.getFileIcon("xlsIcon");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return i.icon.getFileIcon("xlsxIcon");case"application/x-zip-compressed":case"application/zip":return i.icon.getFileIcon("zipIcon");default:return i.icon.getFileIcon("defaultIcon")}}function _(e,t,n){var a=i.popups.get("filesManager.insert"),r=a.find(".fr-file-item-icon-"+e).get(0);if(G(P(t))&&"image/gif"!=P(t)&&"image/webp"!=P(t)){"a"!=r.children[0].localName&&(r.innerHTML="<a target='_blank' href=''>"+r.innerHTML+"</a>"),a.find(".fr-file-item-icon-"+e).get(0).children[0].children[0];var s=new FileReader;if(null!=n&&n){var o=De.get(e);t.name=o.name,De.set(e,t)}if(s.onloadend=function(){a.find(".fr-file-item-icon-"+e).get(0).children[0].children[0].src=s.result;for(var i=atob(s.result.split(",")[1]),n=[],r=0;r<i.length;r++)n.push(i.charCodeAt(r));a.find(".fr-file-item-icon-"+e).get(0).children[0].href=window.URL.createObjectURL(new Blob([new Uint8Array(n)],{type:P(t)})),a.find(".fr-file-item-icon-"+e).get(0).classList.add("file-item-thumbnail-hover")},t)s.readAsDataURL(t);else{var l=L(P(t));r.innerHTML='<svg height="40px" width="40px" viewBox="0 0 55 5" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        '.concat(l.path,"\n        </svg>")}}else{var d=L(P(t));r.innerHTML='<svg height="40px" width="40px" viewBox="0 0 55 55" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      '.concat(d.path,"\n      </svg>")}}function S(e){var t="";if(j(P(De.get(e)))){var n="fr-files-checkbox",a="";Z(P(De.get(e)))||(n="fr-checkbox-disabled",a="disabled"),t='\n      <div class="fr-files-checkbox-line align-autoplay">\n      <div id="checkbox-key-'.concat(e,'" class="').concat(n," fr-autoplay-checkbox  fr-checkbox-").concat(e,'">  \n                   \n      <input type="checkbox" id="fr-file-autoplay-button-').concat(e,'" class="fr-file-button-').concat(e,' fr-file-autoplay-button" data-title="Edit" data-param1="').concat(e,'" role="button" ').concat(a,"/>\n\n      <span>").concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>'," </span>\n      </div>      \n      <label  class='fr-autoplay-checkbox-label'>Autoplay </label>\n      </div>")}var r="application/msword",s="application/vnd.openxmlformats-officedocument.wordprocessingml.document",o="";return!q(P(De.get(e)))&&Z(P(De.get(e)))||(Le="fr-disabled"),j(P(De.get(e)))&&(Le="fr-disabled"),X(P(De.get(e)))&&(Le="fr-disabled",P(De.get(e))!=r&&P(De.get(e))!=s||i.opts.googleOptions&&!i.helpers.isMobile()&&i.opts.googleOptions.API_KEY&&i.opts.googleOptions.CLIENT_ID&&(Le=""),"text/plain"!=P(De.get(e))&&P(De.get(e))!=r&&"application/pdf"!=P(De.get(e))&&P(De.get(e))!=s&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=P(De.get(e))&&"application/vnd.ms-excel"!=P(De.get(e))&&"type/text"!=P(De.get(e))||(o="")),"video/url"===P(De.get(e))&&(Le="fr-disabled"),t+'<div class=\'fr-file-item-action-buttons\' >\n                <button type="button" id="fr-file-insert-button-'.concat(e,'" class=" fr-doc-edit-').concat(e," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-button-").concat(e," fr-file-insert-button-").concat(e,' fr-file-insert-button" data-cmd="imageInsertByUpload" data-title="Insert" data-param1="').concat(e,'" tabIndex="2" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-5 0 28 28" xlmns = "http://w3.org/200/svg"><path d = \'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 \'></path></svg>\n                </button>\n\n                <button type="button" id="fr-file-edit-button-').concat(e,'" class=" fr-doc-edit-').concat(e," ").concat(Le," fr-img-icon fr-btn fr-command fr-submit \n                fr-file-action-icons fr-file-edit-button-").concat(e," fr-file-button-").concat(e,' fr-file-edit-button" data-cmd="editImage" data-title="Edit" data-param1="').concat(e,'" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "0 4 25 25" xlmns = "http://w3.org/200/svg"><path d = \'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z\'></path></svg>\n                </button>\n                \n                <span class="fr-file-view-').concat(e,'"><button type="button" id="fr-file-view-button-').concat(e,'" class=" fr-doc-edit-').concat(e," ").concat(o," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-view-button-").concat(e,' fr-file-view-button" data-cmd="viewImage" data-title="View" data-param1="').concat(e,'" tabIndex="2" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "15 19 21 21" xlmns = "http://w3.org/200/svg"> <path style="fill:none;stroke-width:0.9077;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 19.086094 16.541466 C 16.185625 16.541466 14.318281 19.447115 14.318281 19.447115 L 14.318281 19.555288 C 14.318281 19.555288 16.176719 22.475962 19.077187 22.475962 C 21.977656 22.475962 23.847969 19.576322 23.847969 19.576322 L 23.847969 19.465144 C 23.847969 19.465144 21.989531 16.541466 19.086094 16.541466 Z M 19.07125 21.024639 C 18.248906 21.024639 17.583906 20.357572 17.583906 19.53726 C 17.583906 18.716947 18.248906 18.04988 19.07125 18.04988 C 19.890625 18.04988 20.555625 18.716947 20.555625 19.53726 C 20.555625 20.357572 19.890625 21.024639 19.07125 21.024639 Z M 19.07125 21.024639 " transform="matrix(1.315789,0,0,1.3,0,0)"/></svg></button></span>\n\n                <button type="button" id="fr-file-delete-button-').concat(e,'" class=" fr-doc-edit-').concat(e," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons\n                fr-file-button-").concat(e,' fr-file-delete-button" data-cmd="deleteImage" data-title="Delete" data-param1="').concat(e,'" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z\'></path></svg>\n                </button>\n                 \n            </div>\n            <div id="user_area-').concat(e,"\" style=\"display: none;\">\n            \n              <div id=\"file_container\"></div>\n\n              <div style='display:block;text-align: center; margin-left:50%; id='edit-file-loader' class='fr-file-loader'></div>\n\n          </div> \n            ")}function T(e,t,n){var a=i.popups.get("filesManager.insert");if(!n&&e<=100){a.find(".fr-checkbox-file-"+t).get(0).disabled=!0,a.find(".fr-checkbox-"+t).get(0).classList.remove("fr-files-checkbox"),a.find(".fr-checkbox-"+t).get(0).classList.add("fr-checkbox-disabled");var r=a.find(".fr-file-progress-circle-"+t),s=a.find(".fr-file-upload-percent-"+t);return 50<e?r.get(0).setAttribute("class","fr-file-progress-circle-"+t+" progress-circle p"+Math.floor(e)+" over50"):r.get(0).setAttribute("class","fr-file-progress-circle-"+t+" progress-circle p"+Math.floor(e)),s.get(0).innerHTML=Math.floor(e)+"%",void B(t,e,n)}n&&(a.find(".fr-checkbox-file-"+t).get(0).disabled=!1,a.find(".fr-checkbox-"+t).get(0).classList.remove("fr-checkbox-disabled"),a.find(".fr-checkbox-"+t).get(0).classList.add("fr-files-checkbox"),a.find(".fr-file-item-right-"+t).get(0).innerHTML=S(t),B(t,100,n))}function B(e,t,n){var a=i.popups.get("filesManager.insert");a.find(".fr-progress-bar").removeClass("fr-none").addClass("fr-display-block"),a.find(".fr-upload-progress").hasClass("fr-height-set")&&i.popups.setFileListHeight(a);var r=0;Oe.set(e,t),Oe.forEach(function(e){r+=e}),r/=Oe.size,100==t&&n&&Ne++,a.find('.fr-command[data-cmd="filesUpload"]').addClass("fr-disabled"),a.find('.fr-command[data-cmd="filesByURL"]').addClass("fr-disabled"),a.find('.fr-command[data-cmd="filesEmbed"]').addClass("fr-disabled"),a.find(".fr-progress-bar").get(0).style.width=r+"%",Ne==Oe.size&&(a.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"),Oe=new Map,Ne=0,a.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"),a.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"),a.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"))}function R(e,t){y(),i.popups.get("filesManager.insert").find(".fr-upload-progress-layer").addClass("fr-active"),e.forEach(function(n,a){G(P(n))&&i.opts.imageUploadRemoteUrls&&i.opts.imageCORSProxy&&i.opts.imageUpload?V(n,e,Me,t[a]):Ue.set(t[a],n)})}function D(t){(function(t){if("false"==Se(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;if(t&&"touchend"==t.type&&ft)return!0
;if(t&&i.edit.isDisabled())return t.stopPropagation(),t.preventDefault(),!1;for(var n=0;n<e.INSTANCES.length;n++)e.INSTANCES[n]!=i&&e.INSTANCES[n].events.trigger("image.hideResizer");i.toolbar.disable(),t&&(t.stopPropagation(),t.preventDefault()),i.helpers.isMobile()&&(i.events.disableBlur(),i.$el.blur(),i.events.enableBlur()),i.opts.iframe&&i.size.syncIframe(),Me=Se(this),o(),i.browser.msie?(i.popups.areVisible()&&i.events.disableBlur(),i.win.getSelection&&(i.win.getSelection().removeAllRanges(),i.win.getSelection().addRange(i.doc.createRange()))):i.selection.clear(),i.helpers.isIOS()&&(i.events.disableBlur(),i.$el.blur()),i.button.bulkRefresh(),i.events.trigger("video.hideResizer")}).call(t.get(0))}function U(){var e=Se(this);e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),(0==Fe.length||0<Fe.length&&Fe.length==He)&&(_e=e),"VIDEO"==e.get(0).tagName||"AUDIO"==e.get(0).tagName?i.selection.setAfter(e.parent()):i.selection.setAfter(e),i.undo.saveStep(),i.events.trigger("filesManager.loaded",[e]),O(Fe)}function z(){var e,t=Array.prototype.slice.call(i.el.querySelectorAll("video, .fr-video > *")),n=[];for(e=0;e<t.length;e++)n.push(t[e].getAttribute("src")),Se(t[e]).toggleClass("fr-draggable",i.opts.videoMove),""===t[e].getAttribute("class")&&t[e].removeAttribute("class"),""===t[e].getAttribute("style")&&t[e].removeAttribute("style");if(ot)for(e=0;e<ot.length;e++)n.indexOf(ot[e].getAttribute("src"))<0&&i.events.trigger("video.removed",[Se(ot[e])]);ot=t}function O(e){if(null!=e){if(0==e.length)return void(null!=_e&&("VIDEO"==_e.get(0).tagName?i.video._editVideo(_e.parent()):"IMG"==_e.get(0).tagName?i.image.edit(_e):_e.trigger("click"),i.toolbar.disable()));N(e.shift(),e)}}function $(e){var t=!1;if(j(P(Ue.get(e))))i.trimVideoPlugin.trimVideo(De.get(e),e,De),t=!0;else if(G(P(Ue.get(e)))){var n=Ue.get(e).link,a=i.o_doc.createElement("img");a.src=n,Me=a,Ee=e,i.imageTUI.launch(i,!1,e),t=!0}else if(X(P(Ue.get(e)))){var r={apiKey:i.opts.googleOptions.API_KEY,clientId:i.opts.googleOptions.CLIENT_ID,authorizeButton:"authorize_button-".concat(e),signoutButton:"signout_button",userArea:"user_area-".concat(e),fileInput:"file_input",fileIndex:e,file:De.get(e),fileContainer:"file_container",loadingText:"File is being uploaded...",events:{onInvalidFile:function(){},onError:function(){}}};dt=function(e){function t(){gapi.client.init({apiKey:e.apiKey,clientId:e.clientId,discoveryDocs:d,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata"}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(n),n(gapi.auth2.getAuthInstance().isSignedIn.get()),!gapi.auth2.getAuthInstance().isSignedIn.get()||gapi.auth.getToken()!==undefined&&gapi.auth.getToken().access_token===undefined?Promise.resolve(gapi.auth2.getAuthInstance().signIn()).then(function(){r()}):r()},function(t){e.events.onError(t)})}function n(e){e&&(u.style.display="block")}function a(){var t=gapi.auth.getToken().access_token,n="https://docs.google.com/feeds/download/documents/export/Export?id="+l+"&format=docx&access_token="+t,a=new XMLHttpRequest;a.open("get",n),a.responseType="arraybuffer",a.onload=function(){var t=new Blob([new Uint8Array(this.response)],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),n=De.get(e.fileIndex);t.name=n.name,t.lastModified=n.lastModified,t.lastModifiedDate=n.lastModifiedDate,De.set(e.fileIndex,t),i.filesManager.upload(t,Ue,Me,e.fileIndex),o()},a.send()}function r(){!function(e){for(var t=document.getElementsByClassName("fr-doc-edit-".concat(e)),i=0;i<t.length;i++)t[i].setAttribute("disabled",!0),t[i].classList.add("fr-disabled")}(e.fileIndex);var t,i,n,a=e.file;a?(t=a,i=s,(n=new FileReader).readAsArrayBuffer(t),n.onload=function(){for(var a={title:t.name,mimeType:"application/vnd.google-apps.document"},r="",s=new Uint8Array(n.result),o=s.byteLength,l=0;l<o;l++)r+=String.fromCharCode(s[l]);var d=btoa(r),u=p+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(a)+p+"Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: base64\r\n\r\n"+d+g,m=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart",fields:f},headers:{"Content-Type":'multipart/related; boundary="'+c+'"',"Content-Length":u.Length},body:u});i||(i=function(){}),m.execute(function(t){t.error?e.events.onError(t.error):i(t)})}):e.events.onInvalidFile("File is not selected")}function s(e){l=e.id;var t="https://docs.google.com/document/d/"+e.id+"/edit",n=i.o_doc.body,r=i.o_doc.createElement("div");r.setAttribute("id","editDocContainer"),r.style.cssText="position: fixed; top: 0;left: 0;padding: 0;width: 100%;height: 100%;background: rgba(255,255,255,1);z-index: 9998;display:block",r.innerHTML='<div style="margin-top:25px; text-align:center"><label>Sign Out : </label><input type="checkbox" id ="markSignOut" role="button"/>  <button id="signout_button"  class="fr-trim-button" >Save </button> <button id="cancel_file_edit" class="fr-trim-button">Cancel</button></div>  <iframe title="Edit your file" frameBorder="0" width="100%" height="700px" src="'+t+'"></iframe>',n.appendChild(r),document.getElementById("signout_button").onclick=a,document.getElementById("cancel_file_edit").onclick=o}function o(){document.getElementById("markSignOut").checked&&gapi.auth2.getAuthInstance().signOut().then(function(){gapi.auth.getToken()&&(gapi.auth.getToken().access_token=undefined)});var t=document.getElementById("editDocContainer");t.parentNode.removeChild(t),document.getElementById("user_area-".concat(e.fileIndex))&&(document.getElementById("user_area-".concat(e.fileIndex)).style.display="none"),function(e){for(var t=document.getElementsByClassName("fr-doc-edit-".concat(e)),i=0;i<t.length;i++)t[i].removeAttribute("disabled"),t[i].classList.remove("fr-disabled")}(e.fileIndex)}var l,d=["https://www.googleapis.com/discovery/v1/apis/drive/v2/rest"],f="id,title,mimeType,userPermission,editable,copyable,shared,fileSize",c="-------314159265358979323846",p="\r\n--"+c+"\r\n",g="\r\n--"+c+"--",u=(document.getElementById(e.authorizeButton),document.getElementById(e.userArea));e.events||(e.events={}),e.events.onInvalidFile=e.events.onInvalidFile||function(){},e.events.onError=e.events.onError||function(){};var m={handleClientLoad:function(){gapi.load("client:auth2",t)}};return m}(r),function(e,t){var i=function(e){var t=document.createElement("script");t.src=e,t.onload=function(){this.onload=function(){},dt.handleClientLoad()},t.onreadystatechange=function(){"complete"===this.readyState&&this.onload()},(document.getElementsByTagName("head")[0]||document.body).appendChild(t)};!function n(){0!=e.length?i(e.shift(),n):t&&t()}()}(["https://apis.google.com/js/api.js"],function(){})}t&&(Be=!0)}function P(e){if(""!=e.type)return e.type;var t,i=/(?:\.([^.]+))?$/.exec(e.name)[1];return[[".doc","application/msword"],[".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],[".gif","image/gif"],[".jpeg","image/jpeg"],[".jpg","image/jpeg"],[".txt","text/plain"],[".log","type/text"],[".mov","video/quicktime"],[".mp3","audio/mpeg"],[".mp4","video/mp4"],[".ogg","audio/ogg"],[".ogv","video/ogg"],[".pdf","application/pdf"],[".png","image/png"],[".webm","video/webm"],[".webp","image/webp"],[".wmv","video/x-ms-wmv"],[".xls","application/vnd.ms-excel"],[".xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],[".zip","application/x-zip-compressed"]].forEach(function(e){e[0]==".".concat(i)&&(t=e[1])}),t}function N(e,t){if(X(P(Ue.get(e)))||!Z(P(Ue.get(e)))){var n=Ue.get(e).link,a=Ue.get(e).text;!a&&De.get(e)&&De.get(e).name&&(a=De.get(e).name);var r=Ue.get(e).response;i.edit.on(),i.events.focus(!0),i.selection.restore(),i.opts.fileUseSelectedText&&i.selection.text().length&&(a=i.selection.text()),n.endsWith(".pdf")||n.endsWith(".txt")?F('<iframe src="'.concat(n,'" title="').concat(a,'" width="\u201d100%\u201d" height="\u201d100%\u201d" class="fr-file"></iframe>'),!0):i.html.insert('<a href="'.concat(n,'" target="_blank" id="fr-inserted-file" class="fr-file">').concat(a,"</a>"));var s=i.$el.find("#fr-inserted-file");s.removeAttr("id"),i.undo.saveStep(),function(){var e,t=Array.prototype.slice.call(i.el.querySelectorAll("a.fr-file")),n=[];for(e=0;e<t.length;e++)n.push(t[e].getAttribute("href"));if(lt)for(e=0;e<lt.length;e++)n.indexOf(lt[e].getAttribute("href"))<0&&i.events.trigger("file.unlink",[lt[e]]);lt=t}(),i.selection.clear(),i.selection.setAfter(s),i.events.trigger("file.inserted",[s,r]),O(t)}if(G(P(Ue.get(e)))&&Z(P(Ue.get(e)))){var o=Ue.get(e).link,l=Ue.get(e).sanitize,d=Ue.get(e).data,f=Ue.get(e).$existing_img,c=Ue.get(e).response;f&&"string"==typeof f&&(f=i.$(f)),i.edit.off(),w(i.language.translate("Loading image")),l&&(o=i.helpers.sanitizeURL(o));var p=new Image;p.onload=function(){var e,t;if(f){i.undo.canDo()||f.hasClass("fr-uploading")||i.undo.saveStep();var n=f.data("fr-old-src");f.data("fr-image-pasted")&&(n=null),i.$wp?((e=f.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),n&&f.attr("src",n),f.replaceWith(e)):e=f;for(var a=e.get(0).attributes,r=0;r<a.length;r++){var s=a[r];0===s.nodeName.indexOf("data-")&&e.removeAttr(s.nodeName)}if(void 0!==d)for(t in d)d.hasOwnProperty(t)&&"link"!=t&&e.attr("data-".concat(t),d[t]);e.on("load",U),e.attr("src",o),i.edit.on(),i.undo.saveStep(),i.events.disableBlur(),i.$el.blur(),i.events.trigger(n?"image.replaced":"image.inserted",[e,c])}else e=function(e,t,n){var a,r=Se(document.createElement("img")).attr("src",e);if(t&&void 0!==t)for(a in t)t.hasOwnProperty(a)&&"link"!=a&&(" data-".concat(a,'="').concat(t[a],'"'),r.attr("data-".concat(a),t[a]));var s=i.opts.imageDefaultWidth;s&&"auto"!=s&&(s=i.opts.imageResizeWithPercent?"100%":"".concat(s,"px")),r.attr("style",s?"width: ".concat(s,";"):""),be(r,i.opts.imageDefaultDisplay,i.opts.imageDefaultAlign),r.on("load",n),r.on("error",n),i.edit.on(),i.events.focus(!0),i.selection.restore(),i.undo.saveStep(),i.opts.imageSplitHTML?i.markers.split():i.markers.insert(),i.html.wrap();var o=i.$el.find(".fr-marker");return o.length?(o.parent().is("hr")&&o.parent().after(o),i.node.isLastSibling(o)&&o.parent().hasClass("fr-deletable")&&o.insertAfter(o.parent()),o.replaceWith(r)):i.$el.append(r),r}(o,d,U),i.undo.saveStep(),i.events.disableBlur(),i.$el.blur(),i.events.trigger("image.inserted",[e,c])},p.onerror=function(){u(We,null,null,e),O(t)},p.src=o}if((j(P(Ue.get(e)))||q(P(Ue.get(e))))&&Z(P(Ue.get(e))))if(Ce=e,"video/url"==P(Ue.get(e))){var g=!1;if(document.getElementById("fr-file-autoplay-button-"+e)!==undefined&&(g=document.getElementById("fr-file-autoplay-button-"+e).checked),g&&Ue.get(e)!==undefined&&-1<Ue.get(e).video.indexOf("iframe")&&Ue.get(e).video.indexOf("autoplay=1")<0){var v=Ue.get(e).video.substring(Ue.get(e).video.indexOf("src")+3),h="&";(v=(v=v.substring(v.indexOf('"')+1)).substring(0,v.indexOf('"'))).indexOf("?")<0&&(h="?"),Ue.get(e).video=Ue.get(e).video.replace(v,v+=h+"autoplay=1")}else!g&&Ue.get(e).video.indexOf(!1)&&(-1<Ue.get(e).video.indexOf("&autoplay=1")&&(Ue.get(e).video=Ue.get(e).video.replace("&autoplay=1","")),-1<Ue.get(e).video.indexOf("?autoplay=1")&&(Ue.get(e).video=Ue.get(e).video.replace("?autoplay=1","")));i.events.focus(!0),i.selection.restore(),i.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'.concat(Ue.get(e).video,"</span>"),!1,i.opts.videoSplitHTML),i.popups.hide("filesManager.insert");var b=i.$el.find(".fr-jiv");b.removeClass("fr-jiv"),b.toggleClass("fr-rv",i.opts.videoResponsive),function(e,t,n){!i.opts.htmlUntouched&&i.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv".concat(n[0]," fr-dv").concat(t[0]))):"inline"==t?(e.css({display:"inline-block"}),"center"==n?e.css({float:"none"}):"left"==n?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==n?e.css({textAlign:"left"}):"right"==n?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}(b,i.opts.videoDefaultDisplay,i.opts.videoDefaultAlign),b.toggleClass("fr-draggable",i.opts.videoMove),i.events.trigger("video.inserted",[b]),U.call(b)}else{var y=Ue.get(e).link,x=Ue.get(e).sanitize,M=Ue.get(e).data,E=Ue.get(e).$existing_img,C=Ue.get(e).response;i.edit.off(),x&&(y=i.helpers.sanitizeURL(y)),function(){var t,n;if(E){i.undo.canDo()||E.find("video").hasClass("fr-uploading")||i.undo.saveStep();var a=E.find("video").data("fr-old-src"),r=E.data("fr-replaced");E.data("fr-replaced",!1),i.$wp?((t=E.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"),t.find("video").off("canplay"),a&&E.find("video").attr("src",a),E.replaceWith(t)):t=E;for(var s=t.find("video").get(0).attributes,o=0;o<s.length;o++){var l=s[o];0===l.nodeName.indexOf("data-")&&t.find("video").removeAttr(l.nodeName)}if(void 0!==M)for(n in M)M.hasOwnProperty(n)&&"link"!=n&&t.find("video").attr("data-".concat(n),M[n]);t.find("video").on("canplay",U),t.find("video").attr("src",y),i.edit.on(),z(),i.undo.saveStep(),i.$el.blur(),i.events.trigger(r?"video.replaced":"video.inserted",[t,C])}else t=function(e,t,n,a,r){var s,o="";if(t&&void 0!==t)for(s in t)t.hasOwnProperty(s)&&"link"!=s&&(o+=" data-".concat(s,'="').concat(t[s],'"'));var l,d=i.opts.videoDefaultWidth;if(d&&"auto"!=d&&(d="".concat(d,"px")),q(a))l=Se(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+i.opts.videoDefaultDisplay[0]+("center"!=i.opts.videoDefaultAlign?" fr-fv"+i.opts.videoDefaultAlign[0]:"")).html('<audio src="'+e+'" '+o+" controls>"+i.language.translate("Your browser does not support HTML5 video.")+"</audio>");else{var f="";document.getElementById("fr-file-autoplay-button-"+r).checked&&(f="autoplay"),l=Se(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+i.opts.videoDefaultDisplay[0]+("center"!=i.opts.videoDefaultAlign?" fr-fv"+i.opts.videoDefaultAlign[0]:"")).html('<video src="'+e+'" '+o+(d?' style="width: '+d+';" ':"")+f+"  controls>"+i.language.translate("Your browser does not support HTML5 video.")+"</video>")}l.toggleClass("fr-draggable",i.opts.videoMove),i.edit.on(),i.events.focus(!0),i.selection.restore(),i.undo.saveStep(),i.opts.videoSplitHTML?i.markers.split():i.markers.insert(),i.html.wrap();var c=i.$el.find(".fr-marker");i.node.isLastSibling(c)&&c.parent().hasClass("fr-deletable")&&c.insertAfter(c.parent()),c.replaceWith(l);var p="";return p=q(a)?"audio":"video",l.find(p).get(0).readyState>l.find(p).get(0).HAVE_FUTURE_DATA||i.helpers.isIOS()?n.call(l.find(p).get(0)):(l.find(p).on("canplaythrough load",n),l.find(p).on("error",n)),l}(y,M,U,P(Ue.get(e)),e),z(),i.undo.saveStep(),i.events.trigger("video.inserted",[t,C])}()}i.popups.hide("filesManager.insert"),$e["delete"](e);var A=i.popups.get("filesManager.insert");A.find("input.fr-insert-attr.fr-checkbox-file-".concat(e))[0].checked=!1,A.find(".fr-file-"+e).get(0).classList.add("fr-unchecked"),m(),document.getElementById("fr-file-autoplay-button-"+e)&&(document.getElementById("fr-file-autoplay-button-"+e).checked=!1),Ke=Ke.filter(function(t){return t!=e})}function F(t,n){var a,r;e.VIDEO_EMBED_REGEX.test(t)?(a="video",r=i.opts.videoSplitHTML):e.IMAGE_EMBED_REGEX.test(t)&&(a="image",r=i.opts.imageSplitHTML),i.events.focus(!0),i.selection.restore();var s=!1;Me&&(oe(),s=!0),i.html.insert('<span id="fr-inserted-file" contenteditable="true" draggable="true" class="fr-'.concat(a,' fr-jiv fr-deletable">').concat(t,"</span>"),!1,r),i.popups.hide("filesManager.insert");var o=i.$el.find(".fr-jiv");o.removeClass("fr-jiv"),"video"==a&&(o.toggleClass("fr-rv",i.opts.videoResponsive),function(e,t,n){!i.opts.htmlUntouched&&i.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv".concat(n[0]," fr-dv").concat(t[0]))):"inline"==t?(e.css({display:"inline-block"}),"center"==n?e.css({float:"none"}):"left"==n?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==n?e.css({textAlign:"left"}):"right"==n?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}(o,i.opts.videoDefaultDisplay,i.opts.videoDefaultAlign),o.toggleClass("fr-draggable",i.opts.videoMove),i.events.trigger(s?"video.replaced":"video.inserted",[o])),"image"==a&&(be(o,i.opts.imageDefaultDisplay,i.opts.imageDefaultAlign),o.find("img").removeClass("fr-dii"),o.find("img").addClass("fr-dib"),o.toggleClass("fr-draggable",i.opts.imageMove),i.events.trigger(s?"image.replaced":"image.inserted",[o])),n&&(_e=o,i.selection.clear(),i.toolbar.disable(),i.video._editVideo(_e))}function H(e,t){try{if(!1===i.events.trigger("filesManager.uploaded",[e],!0))return i.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(u(Ge,e,null,t),!1)}catch(ot){return u(je,e,null,t),!1}}function K(e,t){try{var n=Se(e).find("Location").text(),a=Se(e).find("Key").text();return!1===i.events.trigger("filesManager.uploadedToS3",[n,a,e],!0)?(i.edit.on(),!1):n}catch(Fe){return u(je,e,null,t),!1}}function V(e,t,n,a){if(-1<Qe.indexOf(P(e))||!P(e))return u(Ze,null,null,a),!1;if(!1===i.events.trigger("filesManager.beforeUpload",[t]))return!1;if(!(null!==i.opts.filesManagerUploadURL&&i.opts.filesManagerUploadURL!=Te||i.opts.filesManagerUploadToS3||i.opts.filesManagerUploadToAzure))return function(e,t,i){var n=new FileReader;n.onload=function(){var a=n.result;if(n.result.indexOf("svg+xml")<0){for(var r=atob(n.result.split(",")[1]),s=[],o=0;o<r.length;o++)s.push(r.charCodeAt(o));if(a=window.URL.createObjectURL(new Blob([new Uint8Array(s)],{type:P(t)})),G(P(t))){var l={link:a,sanitize:!1,data:null,$existing_img:i,response:null,type:P(t)};Ue.set(e,l)}if(X(P(t))){var d={link:a,text:t.name,response:null,type:P(t)};Ue.set(e,d)}if(j(P(t))||q(P(t))){var f={link:a,sanitize:!1,data:null,$existing_img:i,type:P(t)};Ue.set(e,f)}}},n.readAsDataURL(t)}(a,e),!1;if(G(P(e))&&(e.name||(e.name=(new Date).getTime()+"."+(P(e)||"image/jpeg").replace(/image\//g,""))),e.size>i.opts.filesManagerMaxSize)return u(qe,null,null,a),!1;if(i.opts.filesManagerAllowedTypes.indexOf("*")<0&&i.opts.filesManagerAllowedTypes.indexOf(P(e))<0)return u(Ze,null,null,a),!1;var r;if(function(e){isNaN(e)||(i.popups.get("filesManager.insert").find(".fr-file-item-right-"+e).get(0).innerHTML='<div class=\'fr-file-item-action-buttons\' >\n    <button type="button" id="fr-file-cancel-upload-button-'.concat(e,'" class="fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n    fr-file-button-').concat(e,' fr-file-cancel-upload-button" data-cmd="cancelUpload" data-title="Cancel" data-param1="').concat(e,'" role="button">\n    <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z\'></path></svg>\n    </button>\n\n    <button type="button" id="fr-upload-delete-button-').concat(e,'" class="fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n    fr-file-button-').concat(e,' fr-upload-delete-button" data-cmd="deleteUpload" data-title="Delete" data-param1="').concat(e,'" role="button">\n    <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z\'></path></svg>\n    </button>\n\n    <div class=\'progress-circle p0 fr-file-progress-circle-').concat(e,"'>\n                  <span class='fr-file-upload-percent-").concat(e," fr-file-upload-percent'>0%</span>\n                  <div class='left-half-clipper'>\n                    <div class='first50-bar'></div>\n                    <div class='value-bar'></div>\n                  </div>\n                </div>\n            </div>"),Oe.set(e,0))}(a),i.drag_support.formdata&&(r=i.drag_support.formdata?new FormData:null),r){var s;if(!1!==i.opts.filesManagerUploadToS3)for(s in r.append("key",i.opts.filesManagerUploadToS3.keyStart+(new Date).getTime()+"-"+(e.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",P(e)),i.opts.filesManagerUploadToS3.params)i.opts.filesManagerUploadToS3.params.hasOwnProperty(s)&&r.append(s,i.opts.filesManagerUploadToS3.params[s]);for(s in i.opts.filesManagerUploadParams)i.opts.filesManagerUploadParams.hasOwnProperty(s)&&r.append(s,i.opts.filesManagerUploadParams[s]);r.append(i.opts.filesManagerUploadParam,e,e.name);var o,l,d=i.opts.filesManagerUploadURL;i.opts.filesManagerUploadToS3&&(d=i.opts.filesManagerUploadToS3.uploadURL?i.opts.filesManagerUploadToS3.uploadURL:"https://".concat(i.opts.filesManagerUploadToS3.region,".amazonaws.com/").concat(i.opts.filesManagerUploadToS3.bucket)),i.opts.filesManagerUploadToAzure&&(d=i.opts.filesManagerUploadToAzure.uploadURL?"".concat(i.opts.filesManagerUploadToAzure.uploadURL,"/").concat(e.name):encodeURI("https://".concat(i.opts.filesManagerUploadToAzure.account,".blob.core.windows.net/").concat(i.opts.filesManagerUploadToAzure.container,"/").concat(e.name)),o=d,i.opts.filesManagerUploadToAzure.SASToken&&(d+=i.opts.filesManagerUploadToAzure.SASToken),i.opts.filesManagerUploadMethod="PUT");var f=i.core.getXHR(d,i.opts.filesManagerUploadMethod);if(i.opts.filesManagerUploadToAzure){var c=(new Date).toUTCString();if(!i.opts.filesManagerUploadToAzure.SASToken&&i.opts.filesManagerUploadToAzure.accessKey){var p=i.opts.filesManagerUploadToAzure.account,g=i.opts.filesManagerUploadToAzure.container;if(i.opts.filesManagerUploadToAzure.uploadURL){var m=i.opts.filesManagerUploadToAzure.uploadURL.split("/");g=m.pop(),p=m.pop().split(".")[0]}var v="x-ms-blob-type:BlockBlob\nx-ms-date:".concat(c,"\nx-ms-version:2019-07-07"),h=encodeURI("/"+p+"/"+g+"/"+e.name),b=i.opts.filesManagerUploadMethod+"\n\n\n"+e.size+"\n\n"+P(e)+"\n\n\n\n\n\n\n"+v+"\n"+h,y=i.cryptoJSPlugin.cryptoJS.HmacSHA256(b,i.cryptoJSPlugin.cryptoJS.enc.Base64.parse(i.opts.filesManagerUploadToAzure.accessKey)).toString(i.cryptoJSPlugin.cryptoJS.enc.Base64),w="SharedKey "+p+":"+y;l=y,f.setRequestHeader("Authorization",w)}for(s in f.setRequestHeader("x-ms-version","2019-07-07"),f.setRequestHeader("x-ms-date",c),f.setRequestHeader("Content-Type",P(e)),f.setRequestHeader("x-ms-blob-type","BlockBlob"),i.opts.filesManagerUploadParams)i.opts.filesManagerUploadParams.hasOwnProperty(s)&&f.setRequestHeader(s,i.opts.filesManagerUploadParams[s]);for(s in i.opts.filesManagerUploadToAzure.params)i.opts.filesManagerUploadToAzure.params.hasOwnProperty(s)&&f.setRequestHeader(s,i.opts.filesManagerUploadToAzure.params[s])}f.onload=function(){X(P(e))?function(e,t,n,a,r){var s=this.status,o=this.response,l=this.responseXML,d=this.responseText;try{if(i.opts.filesManagerUploadToS3||i.opts.filesManagerUploadToAzure)if(201===s){var f;if(i.opts.filesManagerUploadToAzure){if(!1===i.events.trigger("filesManager.uploadedToAzure",[this.responseURL,r,o],!0))return i.edit.on(),!1;f=a}else f=K(l,t);if(f){var c={link:f,text:e,response:o,type:n};Ue.set(t,c)}}else u(je,o||l,null,t);else if(200<=s&&s<300){var p=H(d,t);if(p){var g={link:p.link,text:e,response:o,type:n};Ue.set(t,g)}}else u(Xe,o||d,null,t)}catch(m){u(je,o||d,null,t)}}.call(f,e.name,a,P(e),o,l):function(e,t,n,a,r){var s=this.status,o=this.response,l=this.responseXML,d=this.responseText;try{if(i.opts.filesManagerUploadToS3||i.opts.filesManagerUploadToAzure)if(201==s){var f;if(i.opts.filesManagerUploadToAzure){if(!1===i.events.trigger("filesManager.uploadedToAzure",[this.responseURL,r,o],!0))return i.edit.on(),!1;f=a}else f=K(l,t);if(f){var c={link:f,sanitize:!1,data:[],$existing_img:e,response:o||l,type:n};Ue.set(t,c)}}else u(je,o||l,e,t);else if(200<=s&&s<300){var p=H(d,t);if(p){var g={link:p.link,sanitize:!1,data:p,$existing_img:e,response:o||l,type:n};Ue.set(t,g)}}else u(Xe,o||d,e,t)}catch(m){u(je,o||d,e,t)}}.call(f,Me,a,P(e),o,l),Pe.has(a)||T(100,a,!0)},f.onerror=function(){u(je,this.response||this.responseText||this.responseXML,null,a)},f.upload.onprogress=function(e){!function(e,t){e.lengthComputable&&T(e.loaded/e.total*100|0,t,!1)}(e,a)},f.onabort=function(e){!function(e,t){u(Je,t,Me,e)}(a,e)},f.send(i.opts.filesManagerUploadToAzure?e:r),ze.set(a,f)}}function Y(t){i.events.$on(t,"click",".fr-upload-progress-layer",function(e){if(i.helpers.isMobile())return e.stopPropagation(),!1},!0),i.events.$on(t,"dragover dragenter",".fr-upload-progress-layer",function(e){e.preventDefault();for(var t=0;t<e.originalEvent.dataTransfer.types.length;t++)"Files"==e.originalEvent.dataTransfer.types[t]&&(e.originalEvent.dataTransfer.dropEffect="none");return!1},!0),i.events.$on(t,"dragleave dragend",".fr-upload-progress-layer",function(e){return e.preventDefault(),!1},!0),i.events.$on(t,"dragover dragenter",".fr-files-upload-layer",function(e){return Se(this).addClass("fr-drop"),(i.browser.msie||i.browser.edge)&&e.preventDefault(),!1},!0),i.events.$on(t,"dragleave dragend",".fr-files-upload-layer",function(e){return Se(this).removeClass("fr-drop"),(i.browser.msie||i.browser.edge)&&e.preventDefault(),!1},!0),i.events.$on(t,"click",".fr-insert-checkbox",function(){if(this.classList.contains("fr-checkbox-disabled"))return this.children.target.disabled=!0,void(this.children.target.checked=!1);var e=parseInt(this.id.split("-").pop());$e.set(e,this.children.target.checked);for(var i=t.find('.fr-command[data-cmd="insertAll"]'),n=t.find('.fr-command[data-cmd="deleteAll"]'),a=t.find('input.fr-file-insert-check[type="checkbox"]'),r=a.length,s=!0,o=0;o<r;o++)1==a[o].checked&&(s=!1);s?i.addClass("fr-disabled"):i.removeClass("fr-disabled"),s?n.addClass("fr-disabled"):n.removeClass("fr-disabled"),this.children.target.checked?(t.find(".fr-file-"+this.id.split("-").pop()).get(0).setAttribute("draggable","true"),t.find(".fr-file-"+this.id.split("-").pop()).get(0).classList.remove("fr-unchecked")):(this.id.split("-").pop(),t.find(".fr-file-"+this.id.split("-").pop()).get(0).setAttribute("draggable","false"),t.find(".fr-file-"+this.id.split("-").pop()).get(0).classList.add("fr-unchecked"))}),i.events.$on(t,"click",".fr-file-insert-button",function(){this.classList.contains("fr-disabled")||N(parseInt(this.id.split("-").pop()))}),i.events.$on(t,"click",".fr-file-autoplay-button",function(){if(this.parentNode.classList.contains("fr-checkbox-disabled"))return this.disabled=!0,void(this.checked=!1);W(parseInt(this.id.split("-").pop()))}),i.events.$on(t,"click",".fr-file-edit-button",function(){var e=parseInt(this.id.split("-").pop());t.find(".fr-file-edit-button-".concat(e)).hasClass("fr-disabled")||$(e)}),i.events.$on(t,"click",".fr-file-view-button",function(){var e=parseInt(this.id.split("-").pop());t.find(".fr-file-view-button-".concat(e)).hasClass("fr-disabled")||function(e){if(!Z(P(Ue.get(e)))){var t=Ue.get(e).link,n=Ue.get(e).link;if(De.get(e)&&De.get(e).name?n=De.get(e).name:Ue.get(e).text&&(n=Ue.get(e).text),0===t.indexOf("blob:")&&i.browser.msie&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(De.get(e),n);else{var a=document.createElement("a");a.href=t,a.download=n,a.click()}return!1}var r=i.popups.get("filesManager.insert");if(0<r.find(".fr-file-view-image-"+e).length)r.find(".fr-file-view-image-"+e)[0].remove();else{for(var s=r.find(".fr-file-view"),o=0;o<s.length;o++)s.get(o).remove();var l=r.find(".fr-file-view-"+e);if(G(P(Ue.get(e)))){var d='<div class="fr-file-view-modal">\n              <div class="fr-file-view-modal-content">\n              <div class="fr-file-view-close">&times;</div> \n                <img src="'+Ue.get(e).link+"\" class ='fr-file-view-image'/>\n                </div>\n              </div>";l[0].innerHTML=d+l[0].innerHTML}else if(j(P(Ue.get(e)))){var f;if(Ue.get(e).hasOwnProperty("video")){var c=Ue.get(e).video.substring(Ue.get(e).video.indexOf("src")+3),p=c.substring(c.indexOf('"')+1);p=p.substring(0,p.indexOf('"')),f='<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div class="fr-file-view-close">&times;</div> \n          <iframe width="640" height="360" src="'.concat(p+"&autoplay=1",'" frameborder="0" class = "fr-file-view-image"></iframe>\n        </div>\n      </div>')}else f='<div class="fr-file-view-modal">\n          <div class="fr-file-view-modal-content ">\n            <div class="fr-file-view-close">&times;</div> \n            <video controls src="'+Ue.get(e).link+"\"  class ='fr-file-view-image' autoplay></video>\n          </div>\n        </div>";l[0].innerHTML=f+l[0].innerHTML}else if(q(P(Ue.get(e)))){var g='<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div  class="fr-file-view-close">&times;</div> \n          <audio controls="controls"  class =\'fr-file-view-image\' autoplay>\n\n          <source src="'.concat(Ue.get(e).link,'" type="').concat(P(Ue.get(e)),'" />\n\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      </div>');l[0].innerHTML=g+l[0].innerHTML}else if(X(P(Ue.get(e)))){var u=Ue.get(e).link,m=Ue.get(e).text;if(u.endsWith(".pdf")||u.endsWith(".txt")){var v='<div class="fr-file-view-modal">\t\n              <div class="fr-file-view-modal-content " >\t\n              <div class="fr-file-view-close">&times;</div> \t\n              <iframe src="'.concat(u,"\" style='background-color: white;' height='50%' width='50%' title=\"").concat(m,'" class="fr-file fr-file-view-image"></iframe>\t\n            </div>\t\n            </div>');l[0].innerHTML=v+l[0].innerHTML}else if(0===u.indexOf("blob:")&&i.browser.msie&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(De.get(e),m);else{var h=document.createElement("a");h.href=u,h.download=m,h.click()}}}}(e)}),i.events.$on(t,"click",".fr-file-delete-button",function(){v(parseInt(this.id.split("-").pop()))}),i.events.$on(t,"click",".fr-file-cancel-upload-button",function(){!function(e){var t=i.popups.get("filesManager.insert");t.find(".fr-file-item-right-"+e).get(0).innerHTML=S(e),ze.get(e).abort(),B(e,100,!0),t.find(".fr-checkbox-file-"+e).get(0).disabled=!0}(parseInt(this.id.split("-").pop()))}),i.events.$on(t,"click",".fr-upload-delete-button",function(){!function(e){0!=ze.get(e).readyState&&(ze.get(e).abort(),B(e,100,!0),ze["delete"](e)),v(e)}(parseInt(this.id.split("-").pop()))}),i.events.$on(t,"click",".fr-file-view-close",function(){t.find(".fr-file-view-modal").get(0).outerHTML=""}),i.events.$on(t,"click",".fr-plugins-enable",function(){Ye.forEach(function(e){i.opts.pluginsEnabled.indexOf(e)<0&&i.opts.pluginsEnabled.push(e)}),function(t){for(var n in t)if(!i[n]){if(e.PLUGINS[n]&&i.opts.pluginsEnabled.indexOf(n)<0)continue;i[n]=new t[n](i),i[n]._init&&i[n]._init()}}(e.PLUGINS),i.popups.get("filesManager.insert").get(0).outerHTML="",J(),a(!0)}),i.events.$on(t,"click",".fr-plugins-cancel",function(){i.popups.hide("filesManager.insert")}),i.events.$on(t,"drop",".fr-upload-progress",function(e){e.preventDefault(),e.stopPropagation()}),i.events.$on(t,"drop",".fr-files-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),Se(this).removeClass("fr-drop");var n=e.originalEvent.dataTransfer;if(n&&n.files){var a=t.data("instance")||i;a.events.disableBlur();for(var r=[],s=0;s<n.files.length;s++){var o=Ve;De.set(o,n.files[s]),I(o),$e.set(o,!1),r.push(o),Ve++}for(var l=0;l<r.length;l++)a.filesManager.upload(De.get(r[l]),n.files,Me,r[l]);a.events.enableBlur()}},!0),i.helpers.isIOS()&&i.events.$on(t,"touchstart",'.fr-files-upload-layer input[type="file"]',function(){Se(this).trigger("click")},!0),i.events.$on(t,"change",'.fr-files-upload-layer input[type="file"]',function(){if(this.files){var e=t.data("instance")||i;e.events.disableBlur(),t.find("input:focus").blur(),e.events.enableBlur();var n=[];if("undefined"!=typeof this.files&&0<this.files.length){for(var a=0;a<this.files.length;a++){var r=Ve;De.set(r,this.files[a]),I(r),$e.set(r,!1),++Ve,n.push(r)}for(var s=0;s<n.length;s++)e.filesManager.upload(De.get(n[s]),this.files,Me,n[s])}}Se(this).val("")},!0)}function W(e){document.getElementById("fr-file-autoplay-button-"+e).checked?Ke.push(e):Ke=Ke.filter(function(t){return t!=e})}function G(e){return e&&"image"===e.split("/")[0]}function X(e){return e&&"image"!=e.split("/")[0]&&e&&"video"!=e.split("/")[0]&&e&&"audio"!=e.split("/")[0]}function j(e){return e&&"video"===e.split("/")[0]}function q(e){return e&&"audio"===e.split("/")[0]}function Z(e){var t="audio/ogg",n="video/ogg";if(e==t||e==n||"image/webp"==e||"video/webm"==e){
if(i.browser.msie||i.browser.edge||i.browser.safari)return!1;if(i.helpers.isMobile()){if(e==t||e==n)return!1;if(!i.helpers.isAndroid()&&!i.browser.chrome)return!1}}return!0}function J(e){if(e)return i.popups.onRefresh("filesManager.insert",n),i.popups.onHide("filesManager.insert",s),!0;var t,a,r="";i.opts.imageUpload||-1===i.opts.filesInsertButtons.indexOf("filesUpload")||i.opts.imageInsertButtons.splice(i.opts.filesInsertButtons.indexOf("filesUpload"),1);var o=i.button.buildList(i.opts.filesInsertButtons),l=i.button.buildList(i.opts.filesInsertButtons2);""!==o&&(r='<div class="fr-buttons fr-tabs">'.concat(o,'<span class="fr-align-right">').concat(l,"</span></div>"));var d=i.opts.filesInsertButtons.indexOf("filesUpload"),f=i.opts.filesInsertButtons.indexOf("filesByURL"),c=i.opts.filesInsertButtons.indexOf("filesEmbed"),p="";0<=d&&(t=" fr-active",0<=f&&f<d&&(t=""),p='<div class="fr-files-upload-layer'.concat(t,' fr-layer " id="fr-files-upload-layer-').concat(i.id,'"><div style="display:flex"><div class="fr-upload-section"><div class = \'fr-blue-decorator\'><div class = \'fr-cloud-icon\'><svg class = "fr-svg" focusable="false" width="26px" height="26px" viewBox = "0 0 24 24" xlmns = "http://w3.org/200/svg"><path d = \'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z\'></path></svg></div>Drag & Drop One or More Files<br><div class="decorated"><span> OR </span></div> Click Browse Files </div> </div><div class="fr-form"><input type="file" accept="').concat(i.opts.filesManagerAllowedTypes.join(",").toLowerCase(),'" tabIndex="-1" aria - labelledby="fr-files-upload-layer-').concat(i.id,'"role="button" multiple></div> </div></div>'));var g="";0<=c&&(t=" fr-active",(d<c&&0<=d||f<c&&0<=f)&&(t=""),g='<div class="fr-files-embed-layer fr-layer'.concat(t,'" id="fr-files-embed-layer-').concat(i.id,'"><div class="fr-input-line padding-top-15"><textarea data-gramm_editor="false" style=\'height:60px\' id="fr-files-embed-layer-text').concat(i.id,'" type="text" placeholder="').concat(i.language.translate("Embedded Code"),'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="insertEmbed" tabIndex="2" role="button">').concat(i.language.translate("Insert"),"</button></div></div>"));var u="";0<=f&&(t=" fr-active",0<=d&&d<f&&(t=""),u='<div class="fr-files-by-url-layer'.concat(t,' fr-layer" id="fr-files-by-url-layer-').concat(i.id,'"><div class="fr-input-line fr-by-url-padding"><input id="fr-files-by-url-layer-text-').concat(i.id,'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="filesInsertByURL" tabIndex="2" role="button">').concat(i.language.translate("Add"),"</button></div></div>"));var m={buttons:r,upload_layer:p,by_url_layer:u,embed_layer:g,upload_progress_layer:"<div class = ' fr-margin-16 fr-upload-progress' id=\"fr-upload-progress-layer-".concat(i.id,"\" ><div  class='fr-progress-bar-style'><div class='fr-progress-bar fr-none'></div></div><div id='filesList' class = 'fr-upload-progress-layer fr-layer'></div></div>"),progress_bar:'<div class="fr-files-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="filesDismissError" tabIndex="2" role="button">OK</button></div></div>'};return 1<=i.opts.imageInsertButtons.length&&(a=i.popups.create("filesManager.insert",m)),i.$wp&&i.events.$on(i.$wp,"scroll",function(){Me&&i.popups.isVisible("filesManager.insert")&&replace()}),Y(a),i.popups.setPopupDimensions(a),a}function Q(e){var t=e.split("/").pop();if(t.split(".").length<2){var i=new Date;return t+"-"+i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()}return t}function ee(){Me&&i.popups.get("image.alt").find("input").val(Me.attr("alt")||"").trigger("change")}function te(){var e=i.popups.get("image.alt");e||(e=ie()),y(),i.popups.refresh("image.alt"),i.popups.setContainer("image.alt",i.$sc);var t=we();xe()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,a=t.offset().top+t.outerHeight();i.popups.show("image.alt",n,a,t.outerHeight(),!0)}function ie(e){if(e)return i.popups.onRefresh("image.alt",ee),!0;var t={buttons:'<div class="fr-buttons fr-tabs">'.concat(i.button.buildList(i.opts.imageAltButtons),"</div>"),alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'.concat(i.id,'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-').concat(i.id,'" type="text" placeholder="').concat(i.language.translate("Alternative Text"),'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">').concat(i.language.translate("Update"),"</button></div></div>")},n=i.popups.create("image.alt",t);return i.$wp&&i.events.$on(i.$wp,"scroll.image-alt",function(){Me&&i.popups.isVisible("image.alt")&&te()}),n}function ne(){var e=i.popups.get("image.size");if(Me)if(xe()){var t=Me.parent();t.get(0).style.width||(t=Me.parent().parent()),e.find('input[name="width"]').val(t.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(t.get(0).style.height).trigger("change")}else e.find('input[name="width"]').val(Me.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Me.get(0).style.height).trigger("change")}function ae(){var e=i.popups.get("image.size");e||(e=re()),y(),i.popups.refresh("image.size"),i.popups.setContainer("image.size",i.$sc);var t=we();xe()&&(t=t.find(".fr-img-wrap"));var n=t.offset().left+t.outerWidth()/2,a=t.offset().top+t.outerHeight();i.popups.show("image.size",n,a,t.outerHeight(),!0)}function re(e){if(e)return i.popups.onRefresh("image.size",ne),!0;var t={buttons:'<div class="fr-buttons fr-tabs">'.concat(i.button.buildList(i.opts.imageSizeButtons),"</div>"),size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'.concat(i.id,'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-\'').concat(i.id,'" type="text" name="width" placeholder="').concat(i.language.translate("Width"),'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height').concat(i.id,'" type="text" name="height" placeholder="').concat(i.language.translate("Height"),'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">').concat(i.language.translate("Update"),"</button></div></div>")},n=i.popups.create("image.size",t);return i.$wp&&i.events.$on(i.$wp,"scroll.image-size",function(){Me&&i.popups.isVisible("image.size")&&ae()}),n}function se(e,t,i,n){return e.pageX=t,f.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),c.call(this,e),p.call(this,e),++n}function oe(t){(t=t||we())&&!1!==i.events.trigger("image.beforeRemove",[t])&&(i.popups.hideAll(),me(!0),i.undo.canDo()||i.undo.saveStep(),t.get(0)==i.el?t.removeAttr("src"):(t.get(0).parentNode&&"A"==t.get(0).parentNode.tagName?(i.selection.setBefore(t.get(0).parentNode)||i.selection.setAfter(t.get(0).parentNode)||t.parent().after(e.MARKERS),Se(t.get(0).parentNode).remove()):(i.selection.setBefore(t.get(0))||i.selection.setAfter(t.get(0))||t.after(e.MARKERS),t.remove()),i.html.fillEmptyBlocks(),i.selection.restore()),i.undo.saveStep())}function le(t){var n=t.which;if(Me&&(n==e.KEYCODE.BACKSPACE||n==e.KEYCODE.DELETE))return t.preventDefault(),t.stopPropagation(),oe(),!1;if(Me&&n==e.KEYCODE.ESC){var a=Me;return me(!0),i.selection.setAfter(a.get(0)),i.selection.restore(),t.preventDefault(),!1}if(!Me||n!=e.KEYCODE.ARROW_LEFT&&n!=e.KEYCODE.ARROW_RIGHT)return Me&&n===e.KEYCODE.TAB?(t.preventDefault(),t.stopPropagation(),me(!0),!1):Me&&n!=e.KEYCODE.F10&&!i.keys.isBrowserAction(t)?(t.preventDefault(),t.stopPropagation(),!1):void 0;var r=Me.get(0);return me(!0),n==e.KEYCODE.ARROW_LEFT?i.selection.setBefore(r):i.selection.setAfter(r),i.selection.restore(),t.preventDefault(),!1}function de(e){if(e&&"IMG"==e.tagName){if(i.node.hasClass(e,"fr-uploading")||i.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):i.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable"),e.parentNode&&e.parentNode.parentNode&&i.node.hasClass(e.parentNode.parentNode,"fr-img-caption")){var t=e.parentNode.parentNode;t.removeAttribute("contenteditable"),t.removeAttribute("draggable"),t.classList.remove("fr-draggable");var n=e.nextSibling;n&&n.removeAttribute("contenteditable")}}else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var a=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),r=0;r<a.length;r++)de(a[r])}function fe(e){if(!1===i.events.trigger("image.beforePasteUpload",[e]))return!1;Me=Se(e),o(),replace(),b(),Me.on("load",function(){var e=[];o(),Se(i.popups.get("filesManager.insert").get(0)).find("div.fr-active.fr-error").length<1&&b(),Se(this).data("events").find(function(t){"load"===t[0]&&e.push(t)}),e.length<=1&&Se(this).off("load")});for(var t=Se(e).attr("src").split(","),n=atob(t[1]),a=[],r=0;r<n.length;r++)a.push(n.charCodeAt(r));V([new Blob([new Uint8Array(a)],{type:t[0].replace(/data\:/g,"").replace(/;base64/g,"")})],Me)}function ce(){i.opts.imagePaste?i.$el.find("img[data-fr-image-pasted]").each(function(e,t){if(i.opts.imagePasteProcess){var n=i.opts.imageDefaultWidth;n&&"auto"!=n&&(n+=i.opts.imageResizeWithPercent?"%":"px"),Se(t).css("width",n).removeClass("fr-dii fr-dib fr-fir fr-fil"),be(Se(t),i.opts.imageDefaultDisplay,i.opts.imageDefaultAlign)}if(0===t.src.indexOf("data:"))fe(t);else if(0===t.src.indexOf("blob:")||0===t.src.indexOf("http")&&i.opts.imageUploadRemoteUrls&&i.opts.imageCORSProxy){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var e,n=i.o_doc.createElement("CANVAS"),a=n.getContext("2d");n.height=this.naturalHeight,n.width=this.naturalWidth,a.drawImage(this,0,0),setTimeout(function(){fe(t)},0),e=2e3<this.naturalWidth||1500<this.naturalHeight?"jpeg":"png",t.src=n.toDataURL("image/".concat(e))},a.src=(0===t.src.indexOf("blob:")?"":"".concat(i.opts.imageCORSProxy,"/"))+t.src}else 0!==t.src.indexOf("http")||0===t.src.indexOf("https://mail.google.com/mail")?(i.selection.save(),Se(t).remove(),i.selection.restore()):Se(t).removeAttr("data-fr-image-pasted")}):i.$el.find("img[data-fr-image-pasted]").remove()}function pe(e){var t=e.target.result,n=i.opts.imageDefaultWidth;n&&"auto"!=n&&(n+=i.opts.imageResizeWithPercent?"%":"px"),i.undo.saveStep(),i.html.insert('<img data-fr-image-pasted="true" src="'.concat(t,'"').concat(n?' style="width: '.concat(n,';"'):"",">"));var a=i.$el.find('img[data-fr-image-pasted="true"]');a&&be(a,i.opts.imageDefaultDisplay,i.opts.imageDefaultAlign),i.events.trigger("paste.after")}function ge(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.types&&-1!=[].indexOf.call(e.clipboardData.types,"text/rtf")||e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var i=0;i<e.clipboardData.items.length&&!(t=e.clipboardData.items[i].getAsFile());i++);if(t)return function(e){var t=new FileReader;t.onload=pe,t.readAsDataURL(e)}(t),!1}}function ue(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function me(e){Me&&(pt||!0===e)&&(i.toolbar.enable(),Ae&&Ae.removeClass("fr-active"),i.popups.hide("image.edit"),Me=null,he(),ke=null,Ie&&Ie.hide())}function ve(){pt=!0}function he(){pt=!1}function be(e,t,n){!i.opts.htmlUntouched&&i.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),n&&e.addClass("fr-fi".concat(n[0])),t&&e.addClass("fr-di".concat(t[0]))):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:i.opts.imageDefaultMargin}),"center"==n?e.css({float:"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - ".concat(2*i.opts.imageDefaultMargin,"px)"),textAlign:"center"}):"left"==n?e.css({float:"left",marginLeft:0,maxWidth:"calc(100% - ".concat(i.opts.imageDefaultMargin,"px)"),textAlign:"left"}):e.css({float:"right",marginRight:0,maxWidth:"calc(100% - ".concat(i.opts.imageDefaultMargin,"px)"),textAlign:"right"})):"block"==t&&(e.css({display:"block",float:"none",verticalAlign:"top",margin:"".concat(i.opts.imageDefaultMargin,"px auto"),textAlign:"center"}),"left"==n?e.css({marginLeft:0,textAlign:"left"}):"right"==n&&e.css({marginRight:0,textAlign:"right"}))}function ye(){return Me}function we(){return xe()?Me.parents(".fr-img-caption").first():Me}function xe(){return!!Me&&0<Me.parents(".fr-img-caption").length}var Me,Ee,Ce,Ae,ke,Ie,Le,_e,Se=i.$,Te="https://i.froala.com/upload",Be=!1,Re=!1,De=new Map,Ue=new Map,ze=new Map,Oe=new Map,$e=new Map,Pe=new Map,Ne=0,Fe=[],He=-1,Ke=[],Ve=0,Ye=["file","image","imageTUI","video"],We=1,Ge=2,Xe=3,je=4,qe=5,Ze=6,Je=10,Qe=["video/avi","video/mpeg","video/x-ms-wmv"],et={};et[We]="File cannot be loaded from the passed link.",et[Ge]="No link in upload response.",et[Xe]="Error during file upload.",et[je]="Parsing response failed.",et[qe]="File is too large.",et[Ze]="File type is invalid.",et[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",et[8]="File is corrupted.",et[9]="Error during file loading.",et[Je]="File upload cancelled";var tt,it,nt,at,rt,st,ot,lt,dt,ft,ct="",pt=!1;return{_init:function(){var t;i.helpers.isMobile()&&i.events.$on(Se(i.o_win),"orientationchange",function(){setTimeout(function(){a(!0)},100)}),i.events.$on(i.$el,i._mousedown,"IMG"==i.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==Se(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;i.helpers.isMobile()||i.selection.clear(),Re=!0,i.popups.areVisible()&&i.events.disableBlur(),i.browser.msie&&(i.events.disableBlur(),i.$el.attr("contenteditable",!1)),i.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),i.events.$on(i.$el,i._mousedown,".fr-img-caption .fr-inner",function(e){i.core.hasFocus()||i.events.focus(),e.stopPropagation()}),i.events.$on(i.$el,"paste",".fr-img-caption .fr-inner",function(e){i.toolbar.hide(),e.stopPropagation()}),i.events.$on(i.$el,i._mouseup,"IMG"==i.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==Se(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;Re&&(Re=!1,e.stopPropagation(),i.browser.msie&&(i.$el.attr("contenteditable",!0),i.events.enableBlur()))}),i.events.on("keyup",function(e){if(e.shiftKey&&""===i.selection.text().replace(/\n/g,"")&&i.keys.isArrow(e.which)){var t=i.selection.element(),n=i.selection.endElement();t&&"IMG"==t.tagName?D(Se(t)):n&&"IMG"==n.tagName&&D(Se(n))}},!0),i.events.on("window.mousedown",ve),i.events.on("window.touchmove",he),i.events.on("mouseup window.mouseup",function(){if(Me)return me(),!1;he()}),i.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&me()}),i.events.on("image.resizeEnd",function(){i.opts.iframe&&i.size.syncIframe()}),i.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){me(!(Re=!1))}),i.events.on("modals.hide",function(){Me&&i.selection.clear()}),i.events.on("image.resizeEnd",function(){i.win.getSelection&&D(Me)}),i.opts.imageAddNewLine&&i.events.on("image.inserted",function(t){var n=t.get(0);for(n.nextSibling&&"BR"===n.nextSibling.tagName&&(n=n.nextSibling);n&&!i.node.isElement(n);)n=i.node.isLastSibling(n)?n.parentNode:null;i.node.isElement(n)&&(i.opts.enter===e.ENTER_BR?t.after("<br>"):Se(i.node.blockParent(t.get(0))).after("<".concat(i.html.defaultTag(),"><br></").concat(i.html.defaultTag(),">")))}),"IMG"==i.el.tagName&&i.$el.addClass("fr-view"),i.helpers.isMobile()&&(i.events.$on(i.$el,"touchstart","IMG"==i.el.tagName?null:'img:not([contenteditable="false"])',function(){ft=!1}),i.events.$on(i.$el,"touchmove",function(){ft=!0})),i.$wp?(i.events.on("window.keydown keydown",le,!0),i.events.on("keyup",function(t){if(Me&&t.which==e.KEYCODE.ENTER)return!1},!0),i.events.$on(i.$el,"keydown",function(){var t=i.selection.element();(t.nodeType===Node.TEXT_NODE||"BR"==t.tagName&&i.node.isLastSibling(t))&&(t=t.parentNode),i.node.hasClass(t,"fr-inner")||(i.node.hasClass(t,"fr-img-caption")||(t=Se(t).parents(".fr-img-caption").get(0)),i.node.hasClass(t,"fr-img-caption")&&(Se(t).after(e.INVISIBLE_SPACE+e.MARKERS),i.selection.restore()))})):i.events.$on(i.$win,"keydown",le),i.events.on("toolbar.esc",function(){if(Me){if(i.$wp)i.events.disableBlur(),i.events.focus();else{var e=Me;me(!0),i.selection.setAfter(e.get(0)),i.selection.restore()}return!1}},!0),i.events.on("toolbar.focusEditor",function(){if(Me)return!1},!0),i.events.on("window.cut window.copy",function(t){if(Me&&i.popups.isVisible("image.edit")&&!i.popups.get("image.edit").find(":focus").length){var n=we();xe()?(n.before(e.START_MARKER),n.after(e.END_MARKER),i.selection.restore(),i.paste.saveCopiedText(n.get(0).outerHTML,n.text())):i.paste.saveCopiedText(Me.get(0).outerHTML,Me.attr("alt")),"copy"==t.type?setTimeout(function(){D(Me)}):(me(!0),i.undo.saveStep(),setTimeout(function(){i.undo.saveStep()},0))}},!0),i.browser.msie&&i.events.on("keydown",function(t){if(!i.selection.isCollapsed()||!Me)return!0;var n=t.which;n==e.KEYCODE.C&&i.keys.ctrlKey(t)?i.events.trigger("window.copy"):n==e.KEYCODE.X&&i.keys.ctrlKey(t)&&i.events.trigger("window.cut")}),i.events.$on(Se(i.o_win),"keydown",function(t){var i=t.which;if(Me&&i==e.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),i.events.$on(i.$win,"keydown",function(t){var i=t.which;Me&&Me.hasClass("fr-uploading")&&i==e.KEYCODE.ESC&&Me.trigger("abortUpload")}),i.events.on("destroy",function(){Me&&Me.hasClass("fr-uploading")&&Me.trigger("abortUpload")}),i.events.on("paste.before",ge),i.events.on("paste.beforeCleanup",ue),i.events.on("paste.after",ce),i.events.on("html.processGet",de),i.opts.imageOutputSize&&i.events.on("html.beforeGet",function(){t=i.el.querySelectorAll("img");for(var e=0;e<t.length;e++){var n=t[e].style.width||Se(t[e]).width(),a=t[e].style.height||Se(t[e]).height();n&&t[e].setAttribute("width","".concat(n).replace(/px/,"")),a&&t[e].setAttribute("height","".concat(a).replace(/px/,""))}}),i.opts.iframe&&i.events.on("image.loaded",i.size.syncIframe),i.events.$on(Se(i.o_win),"orientationchange.image",function(){setTimeout(function(){Me&&D(Me)},100)}),function(e){if(e)return i.$wp&&i.events.$on(i.$wp,"scroll.image-edit",function(){Me&&i.popups.isVisible("image.edit")&&i.events.disableBlur()}),!0;var t="";if(0<i.opts.imageEditButtons.length){var n={buttons:t+='<div class="fr-buttons"> \n        '.concat(i.button.buildList(i.opts.imageEditButtons),"\n        </div>")};return i.popups.create("image.edit",n)}}(!0),J(!0),re(!0),ie(!0),i.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return oe(e),!1}),i.events.on("popups.hide.filesManager.insert",function(){i.filesManager.minimizePopup(Ce)})},showInsertPopup:a,showLayer:function(e){var t,n,a=i.popups.get("filesManager.insert");if(Me||i.opts.toolbarInline){if(Me){var r=we();xe()&&(r=r.find(".fr-img-wrap")),n=r.offset().top+r.outerHeight(),t=r.offset().left}}else{var s=i.$tb.find('.fr-command[data-cmd="insertFiles"]');t=s.offset().left,n=s.offset().top+(i.opts.toolbarBottom?10:s.outerHeight()-10)}!Me&&i.opts.toolbarInline&&(n=a.offset().top-i.helpers.getPX(a.css("margin-top")),a.hasClass("fr-above")&&(n+=a.outerHeight())),a.find(".fr-layer").removeClass("fr-active"),a.find(".fr-".concat(e,"-layer")).addClass("fr-active"),a.find(".fr-upload-progress-layer").addClass("fr-active"),i.popups.show("filesManager.insert",t,n,Me?Me.outerHeight():0),i.accessibility.focusPopup(a)},refreshUploadButton:function(e){var t=i.popups.get("filesManager.insert");t&&t.find(".fr-files-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshByURLButton:function(e){var t=i.popups.get("filesManager.insert");t&&t.find(".fr-files-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:V,insertByURL:function(){for(var t,n=i.popups.get("filesManager.insert").find(".fr-files-by-url-layer input"),a=n.val().trim().split(/[ ,]+/),r=[],s=0,o=0;o<a.length;o++)t=a[o],new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)&&(r[s]=a[o],s++);if(0!=r.length){if(0<n.val().trim().length&&0<r.length){var l=[],d=[],f=Ve,c=r.length;r.forEach(function(t,n){if(0==t.trim().length)Ve==f+--c&&R(l,d);else{y(),b(),w(i.language.translate("Loading file(s)"));var a=t.trim(),r=function(t){if(void 0===t)return t;var n=null;if(/^http/.test(t)||(t="https://".concat(t)),i.helpers.isURL(t))for(var a=0;a<e.VIDEO_PROVIDERS.length;a++){var r=e.VIDEO_PROVIDERS[a];if(r.test_regex.test(t)&&new RegExp(i.opts.videoAllowedProviders.join("|")).test(r.provider)){n=t.replace(r.url_regex,r.url_text),n=r.html.replace(/\{url\}/,n);break}}return n}(a);if(r){var s={link:a,name:a,type:"video/url",size:2,video:r};De.set(f+n,s),I(f+n),y(),b(),w(i.language.translate("Loading file(s)")),Ue.set(f+n,s),++Ve==f+c&&R(l,d)}else{var o=new XMLHttpRequest;o.onload=function(){if(200==this.status){var e=new Blob([this.response],{type:this.response.type||""});e.name=Q(a),e.link=a,G(this.response.type)?(e.sanitize=!0,e.existing_image=Me):X(this.response.type)&&(e.text=Q(a)),l.push(e),d.push(f+n),De.set(f+n,e),I(f+n),(-1<Qe.indexOf(P(e))||!P(e))&&u(Ze,null,null,f+n)}else{var t=new Blob([this.response],{type:this.response.type||" "});t.name=Q(a),t.link=a,De.set(f+n,t),I(f+n),u(We,this.response,Me,f+n)}y(),b(),w(i.language.translate("Loading file(s)")),++Ve==f+c&&R(l,d)},o.onerror=function(){var e={link:a,name:Q(a),size:0,type:""};u(9,this.response,Me,f+n);var t=Ve;De.set(t,e),I(t),y(),b(),w(i.language.translate("Loading file(s)")),++Ve==f+c&&R(l,d)},o.open("GET","".concat(i.opts.imageCORSProxy,"/").concat(a),!0),o.responseType="blob",o.send()}}}),n.val(""),n.blur()}}else x(i.language.translate("Url entered is invalid. Please try again."))},insertAllFiles:function(){Fe=[];var e=i.popups.get("filesManager.insert");He=-1,_e=null,e.find(".fr-insert-checkbox").toArray().forEach(function(e,t){e.children.target.checked&&(Fe.push(parseInt(e.id.split("-").pop())),G(Ue.get(parseInt(e.id.split("-").pop())).type)&&-1==He&&(He=t))}),O(Fe),m()},deleteAllFiles:function(){i.popups.get("filesManager.insert").find(".fr-insert-checkbox").toArray().forEach(function(e){if(e.children.target.checked){var t=parseInt(e.id.split("-").pop());ze.has(t)&&ze["delete"](t),v(t)}}),m()},get:ye,getEl:we,insert:N,showProgressBar:b,remove:oe,hideProgressBar:y,applyStyle:function(e,n,a){if(void 0===n&&(n=i.opts.imageStyles),void 0===a&&(a=i.opts.imageMultipleStyles),!Me)return!1;var r=we();if(!a){var s=Object.keys(n);s.splice(s.indexOf(e),1),r.removeClass(s.join(" "))}"object"==t(n[e])?(r.removeAttr("style"),r.css(n[e].style)):r.toggleClass(e),D(Me)},showAltPopup:te,showSizePopup:ae,setAlt:function(e){if(Me){var t=i.popups.get("image.alt");Me.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),D(Me)}},setSize:function(e,t){if(Me){var n=i.popups.get("image.size");e=e||n.find('input[name="width"]').val()||"",t=t||n.find('input[name="height"]').val()||"";var a=/^[\d]+((px)|%)*$/g;Me.removeAttr("width").removeAttr("height"),e.match(a)?Me.css("width",e):Me.css("width",""),t.match(a)?Me.css("height",t):Me.css("height",""),xe()&&(Me.parents(".fr-img-caption").removeAttr("width").removeAttr("height"),e.match(a)?Me.parents(".fr-img-caption").css("width",e):Me.parents(".fr-img-caption").css("width",""),t.match(a)?Me.parents(".fr-img-caption").css("height",t):Me.parents(".fr-img-caption").css("height","")),n&&n.find("input:focus").blur(),D(Me)}},toggleCaption:function(){var t;if(Me&&!xe()){(t=Me).parent().is("a")&&(t=Me.parent());var n,a,r=Me.parents("ul")&&0<Me.parents("ul").length?Me.parents("ul"):Me.parents("ol")&&0<Me.parents("ol").length?Me.parents("ol"):[];if(0<r.length){var s=r.find("li").length,o=Me.parents("li"),l=document.createElement("li");s-1===o.index()&&(r.append(l),l.innerHTML="&nbsp;")}t.attr("style")&&(a=-1<(n=t.attr("style").split(":")).indexOf("width")?n[n.indexOf("width")+1].replace(";",""):"");var d=i.opts.imageResizeWithPercent?(-1<a.indexOf("px")?null:a)||"100%":Me.width()+"px";t.wrap('<div class="fr-img-space-wrap"><span '+(i.browser.mozilla?"":'contenteditable="false"')+'class="fr-img-caption '+Me.attr("class")+'" style="'+(i.opts.useClasses?"":t.attr("style"))+'" draggable="false"></span><p class="fr-img-space-wrap2">&nbsp;</p></div>'),t.wrap('<span class="fr-img-wrap"></span>'),Me.after('<span class="fr-inner"'.concat(i.browser.mozilla?"":' contenteditable="true"',">").concat(e.START_MARKER).concat(i.language.translate("Image Caption")).concat(e.END_MARKER,"</span>")),Me.removeAttr("class").removeAttr("style").removeAttr("width"),Me.parents(".fr-img-caption").css("width",d),me(!0),i.selection.restore()}else t=we(),Me.insertAfter(t),Me.attr("class",t.attr("class").replace("fr-img-caption","")).attr("style",t.attr("style")),t.remove(),D(Me)},refreshEmbedButton:function(e){var t=i.popups.get("filesManager.insert");t&&t.find(".fr-files-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},insertEmbed:function(t){void 0===t&&(t=i.popups.get("filesManager.insert").find(".fr-files-embed-layer textarea").val()||""),0===t.length||!e.VIDEO_EMBED_REGEX.test(t)&&!e.IMAGE_EMBED_REGEX.test(t)?(x(i.language.translate("Something went wrong. Please try again.")),e.VIDEO_EMBED_REGEX.test(t)&&i.events.trigger("video.codeError",[t])):F(t)},hasCaption:xe,exitEdit:me,edit:D,cancelFileInsert:function(){this.file_manager_dialog_open=!1,ze.forEach(function(e,t){4!=e.readyState&&(e.abort(),v(t))});var e=i.popups.get("filesManager.insert");e.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"),e.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"),e.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"),e.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"),Ne=0,ze=new Map,Oe=new Map,h(),i.popups.hide("filesManager.insert")},minimizePopup:function(){this.file_manager_dialog_open=!1,i.popups.hide("filesManager.insert"),h()},editImage:$,saveImage:function(e){var t=Ue.get(Ee);t.link=window.URL.createObjectURL(new Blob(e,{type:"image/png"})),Ue.set(Ee,t)},_showErrorMessage:x,_showFileErrorMessage:M,getFileThumbnail:_,deleteFile:v,checkAutoplay:W,checkInsertAllState:m,_disableInsertCheckbox:g,_getFileType:P,isChildWindowOpen:function(){return Be},setChildWindowState:function(e){e!==undefined&&(Be=e)},resetAllFilesCheckbox:h}},e.DefineIcon("insertFiles",{NAME:"image",SVG_KEY:"fileManager"}),e.RegisterShortcut(e.KEYCODE.P,"insertFiles",null,"P"),e.RegisterCommand("insertFiles",{title:"Insert Files",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("filesManager.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("filesManager.insert")):this.filesManager.showInsertPopup()},plugin:"filesManager"}),e.DefineIcon("cloudIcon",{NAME:"cloudIcon",SVG_KEY:"uploadFiles"}),e.DefineIcon("filesUpload",{NAME:"uploadFiles",SVG_KEY:"uploadFiles"}),e.RegisterCommand("filesUpload",{title:"Upload Files",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-upload")},refresh:function(e){this.filesManager.refreshUploadButton(e)}}),e.DefineIcon("filesByURL",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterCommand("filesByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-by-url")},refresh:function(e){this.filesManager.refreshByURLButton(e)}}),e.DefineIcon("filesEmbed",{NAME:"code",SVG_KEY:"codeView"}),e.RegisterCommand("filesEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-embed")},refresh:function(e){this.filesManager.refreshEmbedButton(e)}}),e.DefineIcon("insertAll",{NAME:"insertAll",SVG_KEY:"fileInsert"}),e.RegisterCommand("insertAll",{title:"Insert",undo:!1,focus:!1,toggle:!0,disabled:!0,callback:function(){this.filesManager.insertAllFiles()}}),e.DefineIcon("deleteAll",{NAME:"remove",SVG_KEY:"remove"}),e.RegisterCommand("deleteAll",{title:"Delete",undo:!1,focus:!1,toggle:!0,disabled:!0,callback:function(){this.filesManager.deleteAllFiles()}}),e.DefineIcon("cancel",{NAME:"cancel",SVG_KEY:"cancel"}),e.RegisterCommand("cancel",{title:"Cancel",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.cancelFileInsert()},refresh:function(){}}),e.DefineIcon("minimize",{NAME:"minimize",SVG_KEY:"minimize"}),e.RegisterCommand("minimize",{title:"Minimize",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.minimizePopup("image.insert",!0)},refresh:function(e){this.filesManager.refreshEmbedButton(e)}}),e.RegisterCommand("filesInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.filesManager.insertByURL()},refresh:function(e){e.text(this.language.translate("Add"))}}),e.RegisterCommand("imageInsertByUpload",{title:"Insert",undo:!0,refreshAfterCallback:!1,callback:function(){},refresh:function(){}}),e.RegisterCommand("viewImage",{title:"View Image",undo:!0,refreshAfterCallback:!1,callback:function(){},refresh:function(){}}),e.RegisterCommand("insertEmbed",{undo:!0,focus:!0,callback:function(){this.filesManager.insertEmbed(),this.popups.get("filesManager.insert").find("textarea")[0].value="",this.popups.get("filesManager.insert").find("textarea").removeClass("fr-not-empty")}}),e.RegisterCommand("filesDismissError",{title:"OK",undo:!1,callback:function(){this.filesManager.hideProgressBar(!0)}})});