/*!
 * froala_editor v3.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,Object.assign(e.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video",".fr-embedly","img"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),e.PLUGINS.lineBreaker=function(t){function n(e,n){var r,a,o,i,s,f,l,p;if(null==e)s=(i=n.parent()).offset().top,r=(l=n.offset().top)-Math.min((l-s)/2,t.opts.lineBreakerOffset),o=i.outerWidth(),a=i.offset().left;else if(null==n)(f=(i=e.parent()).offset().top+i.outerHeight())<(p=e.offset().top+e.outerHeight())&&(f=(i=g(i).parent()).offset().top+i.outerHeight()),r=p+Math.min(Math.abs(f-p)/2,t.opts.lineBreakerOffset),o=i.outerWidth(),a=i.offset().left;else{i=e.parent();var c=e.offset().top+e.height(),d=n.offset().top;if(d<c)return!1;r=(c+d)/2,o=i.outerWidth(),a=i.offset().left}if(t.opts.iframe){var v=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),m=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"));a+=t.$iframe.offset().left-t.helpers.scrollLeft()+m,r+=t.$iframe.offset().top-t.helpers.scrollTop()+v}t.$box.append(u),u.css("top",r-t.win.pageYOffset),u.css("left",a-t.win.pageXOffset),u.css("width",o),u.data("tag1",e),u.data("tag2",n),u.addClass("fr-visible").data("instance",t)}function r(e){if(e){var n=g(e);if(0===t.$el.find(n).length)return null;if(e.nodeType!=Node.TEXT_NODE&&n.is(t.opts.lineBreakerTags.join(",")))return n;if(0<n.parents(t.opts.lineBreakerTags.join(",")).length)return e=n.parents(t.opts.lineBreakerTags.join(",")).get(0),0!==t.$el.find(g(e)).length&&g(e).is(t.opts.lineBreakerTags.join(","))?g(e):null}return null}function a(e,n){var r=t.doc.elementFromPoint(e,n);return r&&!g(r).closest(".fr-line-breaker").length&&!t.node.isElement(r)&&r!=t.$wp.get(0)&&function(e){if("undefined"!=typeof e.inFroalaWrapper)return e.inFroalaWrapper;for(var n=e;e.parentNode&&e.parentNode!==t.$wp.get(0);)e=e.parentNode;return n.inFroalaWrapper=e.parentNode==t.$wp.get(0),n.inFroalaWrapper}(r)?r:null}function o(e,n,r){for(var o=r,i=null;o<=t.opts.lineBreakerOffset&&!i;)(i=a(e,n-o))||(i=a(e,n+o)),o+=r;return i}function i(e,n,r){for(var i=null,s=100;!i&&e>t.$box.offset().left&&e<t.$box.offset().left+t.$box.outerWidth()&&0<s;)(i=a(e,n))||(i=o(e,n,5)),"left"==r?e-=t.opts.lineBreakerHorizontalOffset:e+=t.opts.lineBreakerHorizontalOffset,s-=t.opts.lineBreakerHorizontalOffset;return i}function s(e){var a=d=null,s=null,f=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);(a=f&&("HTML"==f.tagName||"BODY"==f.tagName||t.node.isElement(f)||0<=(f.getAttribute("class")||"").indexOf("fr-line-breaker"))?((s=o(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset,1))||(s=i(e.pageX-t.win.pageXOffset-t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"left")),s||(s=i(e.pageX-t.win.pageXOffset+t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"right")),r(s)):r(f))?function(e,a){var o,i,s=e.offset().top,f=e.offset().top+e.outerHeight();if(Math.abs(f-a)<=t.opts.lineBreakerOffset||Math.abs(a-s)<=t.opts.lineBreakerOffset)if(Math.abs(f-a)<Math.abs(a-s)){for(var l=(i=e.get(0)).nextSibling;l&&l.nodeType==Node.TEXT_NODE&&0===l.textContent.length;)l=l.nextSibling;if(!l)return n(e,null),!0;if(o=r(l))return n(e,o),!0}else{if(!(i=e.get(0)).previousSibling)return n(null,e),!0;if(o=r(i.previousSibling))return n(o,e),!0}u.removeClass("fr-visible").removeData("instance")}(a,e.pageY):t.core.sameInstance(u)&&u.removeClass("fr-visible").removeData("instance")}function f(e){return!(u.hasClass("fr-visible")&&!t.core.sameInstance(u))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(u.removeClass("fr-visible"),!0):void(!1!==c||t.edit.isDisabled()||(d&&clearTimeout(d),d=setTimeout(s,30,e))))}function l(){d&&clearTimeout(d),u&&u.hasClass("fr-visible")&&u.removeClass("fr-visible").removeData("instance")}function p(n){n.preventDefault();var r=u.data("instance")||t;u.removeClass("fr-visible").removeData("instance");var a=u.data("tag1"),o=u.data("tag2"),i=t.html.defaultTag();null==a?i&&"TD"!=o.parent().get(0).tagName&&0===o.parents(i).length?o.before("<".concat(i,">").concat(e.MARKERS,"<br></").concat(i,">")):o.before("".concat(e.MARKERS,"<br>")):i&&"TD"!=a.parent().get(0).tagName&&0===a.parents(i).length?a.after("<".concat(i,">").concat(e.MARKERS,"<br></").concat(i,">")):a.after("".concat(e.MARKERS,"<br>")),r.selection.restore(),t.toolbar.enable()}var u,c,d,g=t.$,v=function(){c=!0,l()},m=function(){c=!1};return{_init:function(){if(!t.$wp)return!1;t.shared.$line_breaker||(t.shared.$line_breaker=g(document.createElement("div")).attr("class","fr-line-breaker").html('<a class="fr-floating-btn" role="button" tabIndex="-1" title="'.concat(t.language.translate("Break"),'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect x="17" y="7" width="2" height="8"/><rect x="10" y="13" width="7" height="2"/><path d="M10.000,10.000 L10.000,18.013 L5.000,14.031 L10.000,10.000 Z"/></svg></a>'))),u=t.shared.$line_breaker,t.events.on("shared.destroy",function(){u.html("").removeData().remove(),u=null},!0),t.events.on("destroy",function(){u.removeData("instance").removeClass("fr-visible"),g("body").first().append(u),clearTimeout(d)},!0),t.events.$on(u,"mousemove",function(e){e.stopPropagation()},!0),t.events.bindClick(u,"a",p),c=!1,t.events.$on(t.$win,"mousemove",f),t.events.$on(g(t.win),"scroll",l),t.events.on("popups.show.table.edit",l),t.events.on("commands.after",l),t.events.$on(g(t.win),"mousedown",v),t.events.$on(g(t.win),"mouseup",m)}}}});