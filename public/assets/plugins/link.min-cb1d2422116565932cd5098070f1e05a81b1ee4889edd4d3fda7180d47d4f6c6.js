/*!
 * froala_editor v3.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,Object.assign(e.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),Object.assign(e.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkNoOpener:!0,linkNoReferrer:!0,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.PLUGINS.link=function(t){function n(){var e=t.image?t.image.get():null;if(e||!t.$wp)return"A"==t.el.tagName?t.el:e&&e.get(0).parentNode&&"A"==e.get(0).parentNode.tagName?e.get(0).parentNode:void 0;var n=t.selection.ranges(0).commonAncestorContainer;try{n&&(n.contains&&n.contains(t.el)||!t.el.contains(n)||t.el==n)&&(n=null)}catch(a){n=null}if(n&&"A"===n.tagName)return n;var i=t.selection.element(),r=t.selection.endElement();"A"==i.tagName||t.node.isElement(i)||(i=d(i).parentsUntil(t.$el,"a").first().get(0)),"A"==r.tagName||t.node.isElement(r)||(r=d(r).parentsUntil(t.$el,"a").first().get(0));try{r&&(r.contains&&r.contains(t.el)||!t.el.contains(r)||t.el==r)&&(r=null)}catch(a){r=null}try{i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null)}catch(a){i=null}return r&&r==i&&"A"==r.tagName?(t.browser.msie||t.helpers.isMobile())&&(t.selection.info(i).atEnd||t.selection.info(i).atStart)?null:i:null}function i(){var e,n,i,r,a=t.image?t.image.get():null,l=[];if(a)"A"==a.get(0).parentNode.tagName&&l.push(a.get(0).parentNode);else if(t.win.getSelection){var s=t.win.getSelection();if(s.getRangeAt&&s.rangeCount){r=t.doc.createRange();for(var o=0;o<s.rangeCount;++o)if((n=(e=s.getRangeAt(o)).commonAncestorContainer)&&1!=n.nodeType&&(n=n.parentNode),n&&"a"==n.nodeName.toLowerCase())l.push(n);else{i=n.getElementsByTagName("a");for(var p=0;p<i.length;++p)r.selectNodeContents(i[p]),r.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<r.compareBoundaryPoints(e.START_TO_END,e)&&l.push(i[p])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if("a"==(n=(e=t.doc.selection.createRange()).parentElement()).nodeName.toLowerCase())l.push(n);else{i=n.getElementsByTagName("a"),r=t.doc.body.createTextRange();for(var c=0;c<i.length;++c)r.moveToElementText(i[c]),-1<r.compareEndPoints("StartToEnd",e)&&r.compareEndPoints("EndToStart",e)<1&&l.push(i[c])}return l}function r(i){if(t.core.hasFocus()){if(l(),i&&"keyup"===i.type&&(i.altKey||i.which==e.KEYCODE.ALT))return!0;setTimeout(function(){if(!i||i&&(1==i.which||"mouseup"!=i.type)){var r=n(),l=t.image?t.image.get():null;if(r&&!l){if(t.image){var s=t.node.contents(r);if(1==s.length&&"IMG"==s[0].tagName){var o=t.selection.ranges(0);return 0===o.startOffset&&0===o.endOffset?d(r).before(e.MARKERS):d(r).after(e.MARKERS),t.selection.restore(),!1}}i&&i.stopPropagation(),a(r)}}},t.helpers.isIOS()?100:0)}}function a(e){var i=t.popups.get("link.edit");i||(i=function(){var e="";1<=t.opts.linkEditButtons.length&&("A"==t.el.tagName&&0<=t.opts.linkEditButtons.indexOf("linkRemove")&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'.concat(t.button.buildList(t.opts.linkEditButtons),"</div>"));var i={buttons:e},r=t.popups.create("link.edit",i);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&a(n())}),r}());var r=d(e);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var l=r.offset().left+r.outerWidth()/2,s=r.offset().top+r.outerHeight();t.popups.show("link.edit",l,s,r.outerHeight(),!0)}function l(){t.popups.hide("link.edit")}function s(){var e=t.popups.get("link.insert"),i=n();if(i){var r,a,l=d(i),s=e.find('input.fr-link-attr[type="text"]'),o=e.find('input.fr-link-attr[type="checkbox"]');for(r=0;r<s.length;r++)(a=d(s[r])).val(l.attr(a.attr("name")||""));for(o.attr("checked",!1),r=0;r<o.length;r++)a=d(o[r]),l.attr(a.attr("name"))==a.data("checked")&&a.attr("checked",!0);e.find('input.fr-link-attr[type="text"][name="text"]').val(l.text())}else e.find('input.fr-link-attr[type="text"]').val(""),e.find('input.fr-link-attr[type="checkbox"]').attr("checked",!1),e.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());e.find("input.fr-link-attr").trigger("change"),t.image&&t.image.get()?e.find('.fr-link-attr[name="text"]').parent().hide():e.find('.fr-link-attr[name="text"]').parent().show()}function o(e){if(e)return t.popups.onRefresh("link.insert",s),!0;var n="";1<=t.opts.linkInsertButtons.length&&(n='<div class="fr-buttons fr-tabs">'.concat(t.button.buildList(t.opts.linkInsertButtons),"</div>"));var i="",r=0;for(var a in i='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'.concat(t.id,'">'),i+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'.concat(t.id,'" name="href" type="text" class="fr-link-attr" placeholder="').concat(t.language.translate("URL"),'" tabIndex="').concat(++r,'"></div>'),t.opts.linkText&&(i+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'.concat(t.id,'" name="text" type="text" class="fr-link-attr" placeholder="').concat(t.language.translate("Text"),'" tabIndex="').concat(++r,'"></div>')),t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(a)){var l=t.opts.linkAttributes[a];i+='<div class="fr-input-line"><input name="'.concat(a,'" type="text" class="fr-link-attr" placeholder="').concat(t.language.translate(l),'" tabIndex="').concat(++r,'"></div>')}t.opts.linkAlwaysBlank||(i+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'.concat(t.id,'" tabIndex="').concat(++r,'"><span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>','</span></span><label id="fr-label-target-').concat(t.id,'">').concat(t.language.translate("Open in new tab"),"</label></div>"));var o={buttons:n,input_layer:i+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'.concat(++r,'" type="button">').concat(t.language.translate("Insert"),"</button></div></div>")},p=t.popups.create("link.insert",o);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){(t.image?t.image.get():null)&&t.popups.isVisible("link.insert")&&f(),t.popups.isVisible("link.insert")&&c()}),p}function p(a,l,s){if(void 0===s&&(s={}),!1===t.events.trigger("link.beforeInsert",[a,l,s]))return!1;var o=t.image?t.image.get():null;o||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var p=a;if(t.opts.linkConvertEmailAddress&&t.helpers.isEmail(a)&&!/^mailto:.*/i.test(a)&&(a="mailto:".concat(a)),""===t.opts.linkAutoPrefix||new RegExp("^("+e.LinkProtocols.join("|")+"):.","i").test(a)||/^data:image.*/i.test(a)||/^(https?:|ftps?:|file:|)\/\//i.test(a)||/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(a)||["/","{","[","#","(","."].indexOf((a||"")[0])<0&&(a=t.opts.linkAutoPrefix+t.helpers.sanitizeURL(a)),a=t.helpers.sanitizeURL(a),t.opts.linkAlwaysBlank&&(s.target="_blank"),t.opts.linkAlwaysNoFollow&&(s.rel="nofollow"),t.helpers.isEmail(p)&&(s.target=null,s.rel=null),"_blank"==s.target?(t.opts.linkNoOpener&&(s.rel?s.rel+=" noopener":s.rel="noopener"),t.opts.linkNoReferrer&&(s.rel?s.rel+=" noreferrer":s.rel="noreferrer")):null==s.target&&(s.rel?s.rel=s.rel.replace(/noopener/,"").replace(/noreferrer/,""):s.rel=null),l=l||"",a===t.opts.linkAutoPrefix)return t.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[p]),!1;var c,f=n();if(f){if((c=d(f)).attr("href",a),0<l.length&&c.text()!=l&&!o){for(var u=c.get(0);1===u.childNodes.length&&u.childNodes[0].nodeType==Node.ELEMENT_NODE;)u=u.childNodes[0];d(u).text(l)}for(var k in o||c.prepend(e.START_MARKER).append(e.END_MARKER),s)s[k]?c.attr(k,s[k]):c.removeAttr(k);o||t.selection.restore()}else{o?(o.wrap('<a href="'.concat(a,'"></a>')),t.image.hasCaption()&&o.parent().append(o.parents(".fr-img-caption").find(".fr-inner"))):(t.format.remove("a"),t.selection.isCollapsed()?(l=0===l.length?p:l,t.html.insert('<a href="'.concat(a,'">').concat(e.START_MARKER).concat(l.replace(/&/g,"&amp;").replace(/</,"&lt;",">","&gt;")).concat(e.END_MARKER,"</a>")),t.selection.restore()):0<l.length&&l!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'.concat(a,'">').concat(e.START_MARKER).concat(l.replace(/&/g,"&amp;")).concat(e.END_MARKER,"</a>")),t.selection.restore()):(function(){if(!t.selection.isCollapsed()){t.selection.save();for(var e=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();e.length;){var n=d(e.pop());n.removeClass("fr-unprocessed");var i=t.node.deepestParent(n.get(0));if(i){for(var r=n.get(0),a="",l="";r=r.parentNode,t.node.isBlock(r)||(a+=t.node.closeTagString(r),l=t.node.openTagString(r)+l),r!=i;);var s=t.node.openTagString(n.get(0))+n.html()+t.node.closeTagString(n.get(0));n.replaceWith('<span id="fr-break"></span>');var o=i.outerHTML;o=(o=o.replace(/<span id="fr-break"><\/span>/g,a+s+l)).replace(l+a,""),i.outerHTML=o}e=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.html.cleanEmptyTags(),t.selection.restore()}}(),t.format.apply("a",{href:a})));for(var g=i(),h=0;h<g.length;h++)(c=d(g[h])).attr(s),c.removeAttr("_moz_dirty");1==g.length&&t.$wp&&!o&&(d(g[0]).prepend(e.START_MARKER).append(e.END_MARKER),t.selection.restore())}if(o){var m=t.popups.get("link.insert");m&&m.find("input:focus").blur(),t.image.edit(o)}else r()}function c(){l();var e=n();if(e){var i=t.popups.get("link.insert");i||(i=o()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var r=(t.image?t.image.get():null)||d(e),a=r.offset().left+r.outerWidth()/2,s=r.offset().top+r.outerHeight();t.popups.show("link.insert",a,s,r.outerHeight(),!0)}}function f(){var e=t.image?t.image.getEl():null;if(e){var n=t.popups.get("link.insert");t.image.hasCaption()&&(e=e.find(".fr-img-wrap")),n||(n=o()),s(),t.popups.setContainer("link.insert",t.$sc);var i=e.offset().left+e.outerWidth()/2,r=e.offset().top+e.outerHeight();t.popups.show("link.insert",i,r,e.outerHeight(),!0)}}var d=t.$;return{_init:function(){t.events.on("keyup",function(t){t.which!=e.KEYCODE.ESC&&r(t)}),t.events.on("window.mouseup",r),t.events.$on(t.$el,"click","a",function(e){t.edit.isDisabled()&&e.preventDefault()}),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",r),o(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1},!0)},remove:function(){var e=n(),i=t.image?t.image.get():null;if(!1===t.events.trigger("link.beforeRemove",[e]))return!1;i&&e?(i.unwrap(),t.image.edit(i)):e&&(t.selection.save(),d(e).replaceWith(d(e).html()),t.selection.restore(),l())},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=o()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.isVisible()){var i=t.button.getPosition(e),r=i.left,a=i.top;t.popups.show("link.insert",r,a,e.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")},usePredefined:function(e){var n,i,r=t.opts.linkList[e],a=t.popups.get("link.insert"),l=a.find('input.fr-link-attr[type="text"]'),s=a.find('input.fr-link-attr[type="checkbox"]');for(r.rel&&(a.rel=r.rel),i=0;i<l.length;i++)r[(n=d(l[i])).attr("name")]?(n.val(r[n.attr("name")]),n.toggleClass("fr-not-empty",!0)):"text"!=n.attr("name")&&n.val("");for(i=0;i<s.length;i++)(n=d(s[i])).attr("checked",n.data("checked")==r[n.attr("name")]);t.accessibility.focusPopup(a)},insertCallback:function(){var e,n,i=t.popups.get("link.insert"),r=i.find('input.fr-link-attr[type="text"]'),a=i.find('input.fr-link-attr[type="checkbox"]'),l=(r.filter('[name="href"]').val()||"").trim(),s=r.filter('[name="text"]').val(),o={};for(n=0;n<r.length;n++)e=d(r[n]),["href","text"].indexOf(e.attr("name"))<0&&(o[e.attr("name")]=e.val());for(n=0;n<a.length;n++)(e=d(a[n])).is(":checked")?o[e.attr("name")]=e.data("checked"):o[e.attr("name")]=e.data("unchecked")||null;i.rel&&(o.rel=i.rel);var c=t.helpers.scrollTop();p(l,s,o),d(t.o_win).scrollTop(c)},insert:p,update:c,get:n,allSelected:i,back:function(){t.image&&t.image.get()?t.image.back():(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),n()&&t.$wp?(t.selection.restore(),l(),r()):"A"==t.el.tagName?(t.$el.focus(),r()):(t.popups.hide("link.insert"),t.toolbar.showInline()))},imageLink:f,applyStyle:function(e,i,a){void 0===a&&(a=t.opts.linkMultipleStyles),void 0===i&&(i=t.opts.linkStyles);var l=n();if(!l)return!1;if(!a){var s=Object.keys(i);s.splice(s.indexOf(e),1),d(l).removeClass(s.join(" "))}d(l).toggleClass(e),r()}}},e.DefineIcon("insertLink",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterShortcut(e.KEYCODE.K,"insertLink",null,"K"),e.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.DefineIcon("linkOpen",{NAME:"external-link",FA5NAME:"external-link-alt",SVG_KEY:"openLink"}),e.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&(-1!==e.href.indexOf("mailto:")?this.o_win.open(e.href).close():(e.target||(e.target="_self"),this.browser.msie||this.browser.edge?this.o_win.open(e.href,e.target):this.o_win.open(e.href,e.target,"noopener")),this.popups.hide("link.edit"))},plugin:"link"}),e.DefineIcon("linkEdit",{NAME:"edit",SVG_KEY:"edit"}),e.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.DefineIcon("linkRemove",{NAME:"unlink",SVG_KEY:"unlink"}),e.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),e.DefineIcon("linkBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();this.image&&this.image.get()||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),e.DefineIcon("linkList",{NAME:"search",SVG_KEY:"search"}),e.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'.concat(n,'">').concat(t[n].displayText||t[n].text,"</a></li>");return e+"</ul>"},callback:function(e,t){this.link.usePredefined(t)},plugin:"link"}),e.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))},plugin:"link"}),e.DefineIcon("imageLink",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):((t=e.prev()).hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))},plugin:"link"}),e.DefineIcon("linkStyle",{NAME:"magic",SVG_KEY:"linkStyles"}),e.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'.concat(n,'">').concat(this.language.translate(t[n]),"</a></li>"));return e+"</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(e,t){var n=this.$,i=this.link.get();if(i){var r=n(i);t.find(".fr-command").each(function(){var e=n(this).data("param1"),t=r.hasClass(e);n(this).toggleClass("fr-active",t).attr("aria-selected",t)})}},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"})});