/*!
 * froala_editor v3.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,Object.assign(e.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Object.assign(e.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg","mp3","mpeg","url"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","videoDisplay","videoAlign","videoSize","autoplay"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoResponsive:!1,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadToAzure:!1,videoUploadURL:null}),e.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1?$2",html:'<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],e.VIDEO_EMBED_REGEX=/^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i,e.PLUGINS.video=function(t){function o(){var e=t.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var o=e.find(".fr-video-embed-layer textarea");o.val("").trigger("change"),(o=e.find(".fr-video-upload-layer input")).val("").trigger("change")}function i(){var e=t.popups.get("video.edit");if(e||(e=function(){var e="";if(0<t.opts.videoEditButtons.length){t.opts.videoResponsive&&(-1<t.opts.videoEditButtons.indexOf("videoSize")&&t.opts.videoEditButtons.splice(t.opts.videoEditButtons.indexOf("videoSize"),1),-1<t.opts.videoEditButtons.indexOf("videoDisplay")&&t.opts.videoEditButtons.splice(t.opts.videoEditButtons.indexOf("videoDisplay"),1),-1<t.opts.videoEditButtons.indexOf("videoAlign")&&t.opts.videoEditButtons.splice(t.opts.videoEditButtons.indexOf("videoAlign"),1));var o={buttons:e+='<div class="fr-buttons"> \n      '.concat(t.button.buildList(t.opts.videoEditButtons)," \n      </div>")},i=t.popups.create("video.edit",o);return t.events.$on(t.$wp,"scroll.video-edit",function(){K&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),v(K))}),i}return!1}()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var o=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video")),i=o.offset().left+o.outerWidth()/2,r=o.offset().top+o.outerHeight(),a=o.get(0).src?o.get(0).src:null,n=!(!(a=(a=a.split("."))[a.length-1]).includes("pdf")&&!a.includes("txt"));o.hasClass("fr-file")||n||K.find("audio").get(0)?(document.getElementById("autoplay-".concat(t.id))&&(document.getElementById("autoplay-".concat(t.id)).style.display="none"),document.getElementById("videoReplace-".concat(t.id))&&(document.getElementById("videoReplace-".concat(t.id)).style.display="none")):(document.getElementById("autoplay-".concat(t.id)).style.display="",document.getElementById("videoReplace-".concat(t.id)).style.display=""),t.popups.show("video.edit",i,r,o.outerHeight(),!0)}}function r(e){if(e)return t.popups.onRefresh("video.insert",o),t.popups.onHide("video.insert",$),!0;var i="";t.opts.videoUpload||-1===t.opts.videoInsertButtons.indexOf("videoUpload")||t.opts.videoInsertButtons.splice(t.opts.videoInsertButtons.indexOf("videoUpload"),1);var r=t.button.buildList(t.opts.videoInsertButtons);""!==r&&(i='<div class="fr-buttons">'+r+"</div>");var a,n="",s=t.opts.videoInsertButtons.indexOf("videoUpload"),d=t.opts.videoInsertButtons.indexOf("videoByURL"),l=t.opts.videoInsertButtons.indexOf("videoEmbed");0<=d&&(a=" fr-active",(s<d&&0<=s||l<d&&0<=l)&&(a=""),n='<div class="fr-video-by-url-layer fr-layer'.concat(a,'" id="fr-video-by-url-layer-').concat(t.id,'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-').concat(t.id,'" type="text" placeholder="').concat(t.language.translate("Paste in a video URL"),'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><span style=\'float:left\'><div class="fr-checkbox-line fr-autoplay-margin"><span class="fr-checkbox"> <input id=\'videoPluginAutoplay\' data-checked="_blank" type="checkbox"> <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>','</span></span> <label id="fr-label-target-').concat(t.id,'">Autoplay</label></div> </span><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">').concat(t.language.translate("Insert"),"</button></div></div>"));var p="";0<=l&&(a=" fr-active",(s<l&&0<=s||d<l&&0<=d)&&(a=""),p='<div class="fr-video-embed-layer fr-layer'.concat(a,'" id="fr-video-embed-layer-').concat(t.id,'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text').concat(t.id,'" type="text" placeholder="').concat(t.language.translate("Embedded Code"),'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">').concat(t.language.translate("Insert"),"</button></div></div>"));var f="";0<=s&&(a=" fr-active",(l<s&&0<=l||d<s&&0<=d)&&(a=""),f='<div class="fr-video-upload-layer fr-layer'.concat(a,'" id="fr-video-upload-layer-').concat(t.id,'"><strong>').concat(t.language.translate("Drop video"),"</strong><br>(").concat(t.language.translate("or click"),')<div class="fr-form"><input type="file" accept="video/').concat(t.opts.videoAllowedTypes.join(", video/").toLowerCase(),'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-').concat(t.id,'" role="button"></div></div>'));var v={buttons:i,by_url_layer:n,embed_layer:p,upload_layer:f,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},c=t.popups.create("video.insert",v);return function(e){t.events.$on(e,"dragover dragenter",".fr-video-upload-layer",function(){return G(this).addClass("fr-drop"),!1},!0),t.events.$on(e,"dragleave dragend",".fr-video-upload-layer",function(){return G(this).removeClass("fr-drop"),!1},!0),t.events.$on(e,"drop",".fr-video-upload-layer",function(o){o.preventDefault(),o.stopPropagation(),G(this).removeClass("fr-drop");var i=o.originalEvent.dataTransfer;if(i&&i.files){var r=e.data("instance")||t;r.events.disableBlur(),r.video.upload(i.files),r.events.enableBlur()}},!0),t.helpers.isIOS()&&t.events.$on(e,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){G(this).trigger("click")},!0),t.events.$on(e,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var o=e.data("instance")||t;o.events.disableBlur(),e.find("input:focus").blur(),o.events.enableBlur(),o.video.upload(this.files)}G(this).val("")},!0)}(c),c}function a(e){t.events.focus(!0),t.selection.restore();var o=!1;K&&(P(),o=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'.concat(e,"</span>"),!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var i=t.$el.find(".fr-jiv");i.removeClass("fr-jiv"),i.toggleClass("fr-rv",t.opts.videoResponsive),L(i,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),i.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(o?"video.replaced":"video.inserted",[i])}function n(){var e=G(this);t.popups.hide("video.insert"),e.removeClass("fr-uploading"),e.parent().next().is("br")&&e.parent().next().remove(),v(e.parent()),t.events.trigger("video.loaded",[e.parent()])}function s(e,o,i,r,a){t.edit.off(),p("Loading video"),o&&(e=t.helpers.sanitizeURL(e));var s=function(){var o,s;if(r){t.undo.canDo()||r.find("video").hasClass("fr-uploading")||t.undo.saveStep();var d=r.find("video").data("fr-old-src"),l=r.data("fr-replaced");r.data("fr-replaced",!1),t.$wp?((o=r.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"),o.find("video").off("canplay"),d&&r.find("video").attr("src",d),r.replaceWith(o)):o=r;for(var p=o.find("video").get(0).attributes,f=0;f<p.length;f++){var v=p[f];0===v.nodeName.indexOf("data-")&&o.find("video").removeAttr(v.nodeName)}if(void 0!==i)for(s in i)i.hasOwnProperty(s)&&"link"!=s&&o.find("video").attr("data-".concat(s),i[s]);o.find("video").on("canplay",n),o.find("video").attr("src",e),t.edit.on(),A(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(l?"video.replaced":"video.inserted",[o,a])}else o=function(e,o,i){var r,a="";if(o&&void 0!==o)for(r in o)o.hasOwnProperty(r)&&"link"!=r&&(a+=" data-".concat(r,'="').concat(o[r],'"'));var n=t.opts.videoDefaultWidth;n&&"auto"!=n&&(n="".concat(n,"px"));var s=G(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")).html('<video src="'+e+'" '+a+(n?' style="width: '+n+';" ':"")+" controls>"+t.language.translate("Your browser does not support HTML5 video.")+"</video>");s.toggleClass("fr-draggable",t.opts.videoMove),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert(),t.html.wrap();var d=t.$el.find(".fr-marker");return t.node.isLastSibling(d)&&d.parent().hasClass("fr-deletable")&&d.insertAfter(d.parent()),d.replaceWith(s),t.selection.clear(),s.find("video").get(0).readyState>s.find("video").get(0).HAVE_FUTURE_DATA||t.helpers.isIOS()?i.call(s.find("video").get(0)):s.find("video").on("canplaythrough load",i),s}(e,i,n),A(),t.undo.saveStep(),t.events.trigger("video.inserted",[o,a])};d("Loading video"),s()}function d(e){var o=t.popups.get("video.insert");if(o||(o=r()),o.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),o.find(".fr-video-progress-bar-layer").addClass("fr-active"),o.find(".fr-buttons").hide(),K){var i=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video"));t.popups.setContainer("video.insert",t.$sc);var a=i.offset().left,n=i.offset().top+i.height();t.popups.show("video.insert",a,n,i.outerHeight())}void 0===e&&p(t.language.translate("Uploading"),0)}function l(e){var o=t.popups.get("video.insert");if(o&&(o.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),o.find(".fr-video-progress-bar-layer").removeClass("fr-active"),o.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&K){var i=K;U(!0),t.selection.setAfter(i.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function p(e,o){var i=t.popups.get("video.insert");if(i){var r=i.find(".fr-video-progress-bar-layer");r.find("h3").text(e+(o?" ".concat(o,"%"):"")),r.removeClass("fr-error"),o?(r.find("div").removeClass("fr-indeterminate"),r.find("div > span").css("width","".concat(o,"%"))):r.find("div").addClass("fr-indeterminate")}}function f(e){d();var o=t.popups.get("video.insert").find(".fr-video-progress-bar-layer");o.addClass("fr-error");var i=o.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function v(e){S.call(e.get(0))}function c(e,o,i){p("Loading video");var r=this.status,a=this.response,n=this.responseXML,d=this.responseText;try{if(t.opts.videoUploadToS3||t.opts.videoUploadToAzure)if(201==r){var l;if(t.opts.videoUploadToAzure){if(!1===t.events.trigger("video.uploadedToAzure",[this.responseURL,i,a],!0))return t.edit.on(),!1;l=o}else l=function(e){try{var o=G(e).find("Location").text(),i=G(e).find("Key").text();return!1===t.events.trigger("video.uploadedToS3",[o,i,e],!0)?(t.edit.on(),!1):o}catch(r){return D(J,e),!1}}(n);l&&s(l,!1,[],e,a||n)}else D(J,a||n);else if(200<=r&&r<300){var f=function(e){try{if(!1===t.events.trigger("video.uploaded",[e],!0))return t.edit.on(),!1;var o=JSON.parse(e);return o.link?o:(D(W,e),!1)}catch(i){return D(J,e),!1}}(d);f&&s(f.link,!1,f,e,a||d)}else D(q,a||d)}catch(H){D(J,a||d)}}function u(){D(J,this.response||this.responseText||this.responseXML)}function g(e){if(e.lengthComputable){var o=e.loaded/e.total*100|0;p(t.language.translate("Uploading"),o)}}function h(){t.edit.on(),l(!0)}function m(e){if(!t.core.sameInstance(H))return!0;e.preventDefault(),e.stopPropagation();var o=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!o||!i)return!1;if("mousedown"==e.type){var a=t.$oel.get(0).ownerDocument,n=a.defaultView||a.parentWindow,s=!1;try{s=n.location!=n.parent.location&&!(n.$&&n.$.FE)}catch(r){}s&&n.frameElement&&(o+=t.helpers.getPX(G(n.frameElement).offset().left)+n.frameElement.clientLeft,i=e.clientY+t.helpers.getPX(G(n.frameElement).offset().top)+n.frameElement.clientTop)}t.undo.canDo()||t.undo.saveStep(),(N=G(this)).data("start-x",o),N.data("start-y",i),Y.show(),t.popups.hideAll(),R()}function b(e){if(!t.core.sameInstance(H))return!0;if(N){e.preventDefault();var o=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!o||!i)return!1;var r=N.data("start-x"),a=N.data("start-y");N.data("start-x",o),N.data("start-y",i);var n=o-r,s=i-a,d=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video")),l=d.width(),p=d.height();(N.hasClass("fr-hnw")||N.hasClass("fr-hsw"))&&(n=0-n),(N.hasClass("fr-hnw")||N.hasClass("fr-hne"))&&(s=0-s),d.css("width",l+n),d.css("height",p+s),d.removeAttr("width"),d.removeAttr("height"),C()}}function y(e){if(!t.core.sameInstance(H))return!0;N&&K&&(e&&e.stopPropagation(),N=null,Y.hide(),C(),i(),t.undo.saveStep())}function w(e){return'<div class="fr-handler fr-h'.concat(e,'"></div>')}function E(e,t,o,i){return e.pageX=t,e.pageY=t,m.call(this,e),e.pageX=e.pageX+o*Math.floor(Math.pow(1.1,i)),e.pageY=e.pageY+o*Math.floor(Math.pow(1.1,i)),b.call(this,e),y.call(this,e),++i}function A(){var e,o=Array.prototype.slice.call(t.el.querySelectorAll("video, .fr-video > *")),i=[];for(e=0;e<o.length;e++)i.push(o[e].getAttribute("src")),G(o[e]).toggleClass("fr-draggable",t.opts.videoMove),""===o[e].getAttribute("class")&&o[e].removeAttribute("class"),""===o[e].getAttribute("style")&&o[e].removeAttribute("style");if(F)for(e=0;e<F.length;e++)i.indexOf(F[e].getAttribute("src"))<0&&t.events.trigger("video.removed",[G(F[e])]);F=o}function C(){H||function(){var o;if(t.shared.$video_resizer?(H=t.shared.$video_resizer,Y=t.shared.$vid_overlay,t.events.on("destroy",function(){G("body").first().append(H.removeClass("fr-active"))},!0)):(t.shared.$video_resizer=G(document.createElement("div")).attr("class","fr-video-resizer"),H=t.shared.$video_resizer,t.events.$on(H,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(H.append(w("nw")+w("ne")+w("sw")+w("se")),t.shared.$vid_overlay=G(document.createElement("div")).attr("class","fr-video-overlay"),Y=t.shared.$vid_overlay,o=H.get(0).ownerDocument,G(o).find("body").first().append(Y))),t.events.on("shared.destroy",function(){H.html("").removeData().remove(),H=null,t.opts.videoResize&&(Y.remove(),Y=null)},!0),t.helpers.isMobile()||t.events.$on(G(t.o_win),"resize.video",function(){U(!0)}),t.opts.videoResize){o=H.get(0).ownerDocument,t.events.$on(H,t._mousedown,".fr-handler",m),t.events.$on(G(o),t._mousemove,b),t.events.$on(G(o.defaultView||o.parentWindow),t._mouseup,y),t.events.$on(Y,"mouseleave",y);var i=1,r=null,a=0;t.events.on("keydown",function(o){if(K){var n=-1!=navigator.userAgent.indexOf("Mac OS X")?o.metaKey:o.ctrlKey,s=o.which;(s!==r||200<o.timeStamp-a)&&(i=1),(s==e.KEYCODE.EQUALS||t.browser.mozilla&&s==e.KEYCODE.FF_EQUALS)&&n&&!o.altKey?i=E.call(this,o,1,1,i):(s==e.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.KEYCODE.FF_HYPHEN)&&n&&!o.altKey&&(i=E.call(this,o,2,-1,i)),r=s,a=o.timeStamp}}),t.events.on("keyup",function(){i=1})}}(),(t.$wp||t.$sc).append(H),H.data("instance",t);var o=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video")),i=0,r=0;t.opts.iframe&&(r=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-top")),i=t.helpers.getPX(t.$wp.find(".fr-iframe").css("padding-left"))),H.css("top",(t.opts.iframe?o.offset().top+r-1:o.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?o.offset().left+i-1:o.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",o.get(0).getBoundingClientRect().width).css("height",o.get(0).getBoundingClientRect().height).addClass("fr-active")}function S(o){if(o&&"touchend"==o.type&&X)return!0;if(o&&t.edit.isDisabled())return o.stopPropagation(),o.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var r=0;r<e.INSTANCES.length;r++)e.INSTANCES[r]!=t&&e.INSTANCES[r].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.$el.find(".fr-video.fr-active").removeClass("fr-active"),(K=G(this)).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),V(),C(),i(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function U(e){K&&(t.shared.vid_exit_flag||!0===e)&&(H.removeClass("fr-active"),t.toolbar.enable(),K.removeClass("fr-active"),K=null,R())}function x(){t.shared.vid_exit_flag=!0}function R(){t.shared.vid_exit_flag=!1}function _(o){var i=o.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var a=i.files[0];if(a&&a.type&&-1!==a.type.indexOf("video")){if(!t.opts.videoUpload)return o.preventDefault(),o.stopPropagation(),!1;t.markers.remove(),t.markers.insertAtPoint(o.originalEvent),t.$el.find(".fr-marker").replaceWith(e.MARKERS),t.popups.hideAll();var n=t.popups.get("video.insert");return n||(n=r()),t.popups.setContainer("video.insert",t.$sc),t.popups.show("video.insert",o.originalEvent.pageX,o.originalEvent.pageY),d(),0<=t.opts.videoAllowedTypes.indexOf(a.type.replace(/video\//g,""))?B(i.files):D(Q),o.preventDefault(),o.stopPropagation(),!1}}}function B(e){if(void 0!==e&&0<e.length){if(!1===t.events.trigger("video.beforeUpload",[e]))return!1;var o,i=e[0];if(!(null!==t.opts.videoUploadURL&&t.opts.videoUploadURL!=j||t.opts.videoUploadToS3||t.opts.videoUploadToAzure))return function(e){K&&K.find("iframe")&&K.find("iframe").length&&P();var t=new FileReader;t.onload=function(){t.result;for(var o=atob(t.result.split(",")[1]),i=[],r=0;r<o.length;r++)i.push(o.charCodeAt(r));s(window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:e.type})),!1,null,K)},d(),t.readAsDataURL(e)}(i),!1;if(i.size>t.opts.videoMaxSize)return D(Z),!1;if(t.opts.videoAllowedTypes.indexOf(i.type.replace(/video\//g,""))<0)return D(Q),!1;if(t.drag_support.formdata&&(o=t.drag_support.formdata?new FormData:null),o){var r;if(!1!==t.opts.videoUploadToS3)for(r in o.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),o.append("success_action_status","201"),o.append("X-Requested-With","xhr"),o.append("Content-Type",i.type),t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(r)&&o.append(r,t.opts.videoUploadToS3.params[r]);for(r in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(r)&&o.append(r,t.opts.videoUploadParams[r]);o.append(t.opts.videoUploadParam,i);var a,n,l=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(l=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://".concat(t.opts.videoUploadToS3.region,".amazonaws.com/").concat(t.opts.videoUploadToS3.bucket));var p=t.opts.videoUploadMethod;t.opts.videoUploadToAzure&&(l=t.opts.videoUploadToAzure.uploadURL?"".concat(t.opts.videoUploadToAzure.uploadURL,"/").concat(i.name):encodeURI("https://".concat(t.opts.videoUploadToAzure.account,".blob.core.windows.net/").concat(t.opts.videoUploadToAzure.container,"/").concat(i.name)),a=l,t.opts.videoUploadToAzure.SASToken&&(l+=t.opts.videoUploadToAzure.SASToken),p="PUT");var f=t.core.getXHR(l,p);if(t.opts.videoUploadToAzure){var v=(new Date).toUTCString();if(!t.opts.videoUploadToAzure.SASToken&&t.opts.videoUploadToAzure.accessKey){var m=t.opts.videoUploadToAzure.account,b=t.opts.videoUploadToAzure.container;if(t.opts.videoUploadToAzure.uploadURL){var y=t.opts.videoUploadToAzure.uploadURL.split("/");b=y.pop(),m=y.pop().split(".")[0]}var w="x-ms-blob-type:BlockBlob\nx-ms-date:".concat(v,"\nx-ms-version:2019-07-07"),E=encodeURI("/"+m+"/"+b+"/"+i.name),A=p+"\n\n\n"+i.size+"\n\n"+i.type+"\n\n\n\n\n\n\n"+w+"\n"+E,C=t.cryptoJSPlugin.cryptoJS.HmacSHA256(A,t.cryptoJSPlugin.cryptoJS.enc.Base64.parse(t.opts.videoUploadToAzure.accessKey)).toString(t.cryptoJSPlugin.cryptoJS.enc.Base64),S="SharedKey "+m+":"+C;n=C,f.setRequestHeader("Authorization",S)}for(r in f.setRequestHeader("x-ms-version","2019-07-07"),f.setRequestHeader("x-ms-date",v),f.setRequestHeader("Content-Type",i.type),f.setRequestHeader("x-ms-blob-type","BlockBlob"),t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(r)&&f.setRequestHeader(r,t.opts.videoUploadParams[r]);for(r in t.opts.videoUploadToAzure.params)t.opts.videoUploadToAzure.params.hasOwnProperty(r)&&f.setRequestHeader(r,t.opts.videoUploadToAzure.params[r])}f.onload=function(){c.call(f,K,a,n)},f.onerror=u,f.upload.onprogress=g,f.onabort=h,d(),t.events.disableBlur(),t.edit.off(),t.events.enableBlur();var U=t.popups.get("video.insert");U&&G(U.off("abortUpload")).on("abortUpload",function(){4!=f.readyState&&f.abort()}),f.send(t.opts.videoUploadToAzure?i:o)}}}function D(e,o){t.edit.on(),K&&K.find("video").addClass("fr-error"),f(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:ee[e]},o])}function T(){if(K){var e=t.popups.get("video.size"),o=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video"));e.find('input[name="width"]').val(o.get(0).style.width||o.attr("width")).trigger("change"),e.find('input[name="height"]').val(o.get(0).style.height||o.attr("height")).trigger("change")}}function I(e){if(e)return t.popups.onRefresh("video.size",T),!0;var o={buttons:'<div class="fr-buttons fr-tabs">'.concat(t.button.buildList(t.opts.videoSizeButtons),"</div>"),size_layer:'<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'.concat(t.id,'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-').concat(t.id,'" type="text" name="width" placeholder="').concat(t.language.translate("Width"),'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-').concat(t.id,'" type="text" name="height" placeholder="').concat(t.language.translate("Height"),'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">').concat(t.language.translate("Update"),"</button></div></div>")},i=t.popups.create("video.size",o);return t.events.$on(t.$wp,"scroll",function(){K&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),v(K))}),i}function k(e){if(void 0===e&&(e=K),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function z(e){void 0===e&&(e=K);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function P(){if(K&&!1!==t.events.trigger("video.beforeRemove",[K])){var e=K;t.popups.hideAll(),U(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks()}}function $(){l()}function L(e,o,i){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv".concat(i[0]," fr-dv").concat(o[0]))):"inline"==o?(e.css({display:"inline-block"}),"center"==i?e.css({float:"none"}):"left"==i?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==i?e.css({textAlign:"left"}):"right"==i?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function O(){var o=t.$el.find("video").filter(function(){return 0===G(this).parents("span.fr-video").length});if(0!=o.length){o.wrap(G(document.createElement("span")).attr("class","fr-video fr-deletable").attr("contenteditable","false")),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),0<G(this).parents("span.fr-video").length)return!1;for(var o=G(this).attr("src"),i=0;i<e.VIDEO_PROVIDERS.length;i++){var r=e.VIDEO_PROVIDERS[i];if(r.test_regex.test(o)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(r.provider))return!0}return!1}).map(function(){return 0===G(this).parents("object").length?this:G(this).parents("object").get(0)}).wrap(G(document.createElement("span")).attr("class","fr-video").attr("contenteditable","false"));for(var i,r,a,n=t.$el.find("span.fr-video, video"),s=0;s<n.length;s++){var d=G(n[s]);!t.opts.htmlUntouched&&t.opts.useClasses?((a=d).hasClass("fr-dvi")||a.hasClass("fr-dvb")||(a.addClass("fr-fv".concat(k(a)[0])),a.addClass("fr-dv".concat(z(a)[0]))),t.opts.videoTextNear||d.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||(r=(i=d).hasClass("fr-dvb")?"block":i.hasClass("fr-dvi")?"inline":null,L(i,r,i.hasClass("fr-fvl")?"left":i.hasClass("fr-fvr")?"right":k(i)),i.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl"))}n.toggleClass("fr-draggable",t.opts.videoMove)}}function M(e){document.getElementById("autoplay-".concat(t.id)).style.cssText="background:".concat(e)}function V(){if(K){t.selection.clear();var e=t.doc.createRange();e.selectNode(K.get(0)),t.selection.get().addRange(e)}}var Y,N,H,K,F,X,G=t.$,j="https://i.froala.com/upload",W=2,q=3,J=4,Z=5,Q=6,ee={1:"Video cannot be loaded from the passed link."};return ee[W]="No link in upload response.",ee[q]="Error during file upload.",ee[J]="Parsing response failed.",ee[Z]="File is too large.",ee[Q]="Video file type is invalid.",ee[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",t.shared.vid_exit_flag=!1,{_init:function(){t.opts.videoResponsive&&(t.opts.videoResize=!1),t.events.on("drop",_,!0),t.events.on("mousedown window.mousedown",x),t.events.on("window.touchmove",R),t.events.on("mouseup window.mouseup",U),t.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&U()}),t.events.on("video.hideResizer commands.undo commands.redo element.dropped",function(){U(!0)}),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){X=!1}),t.events.$on(t.$el,"touchmove",function(){X=!0})),t.events.on("html.set",O),O(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation(),(t.browser.msie||t.browser.edge)&&(e.target.innerText||(e.target.dragDrop(),S.call(this,e)))}),t.events.$on(t.$el,"click touchend","span.fr-video",function(e){if(e.target.innerText.length||"false"==G(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;S.call(this,e)}),t.events.on("keydown",function(o){var i=o.which;return!K||i!=e.KEYCODE.BACKSPACE&&i!=e.KEYCODE.DELETE?K&&i==e.KEYCODE.ESC?(U(!0),o.preventDefault(),!1):K&&i!=e.KEYCODE.F10&&!t.keys.isBrowserAction(o)?(o.preventDefault(),!1):void 0:(o.preventDefault(),P(),t.undo.saveStep(),!1)},!0),t.events.on("toolbar.esc",function(){if(K)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.on("toolbar.focusEditor",function(){if(K)return!1},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),t.$wp&&(A(),t.events.on("contentChanged",A)),r(!0),I(!0)},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),o=t.popups.get("video.insert");if(o||(o=r()),l(),!o.hasClass("fr-active"))if(t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb),e.isVisible()){var i=t.button.getPosition(e),a=i.left,n=i.top;t.popups.show("video.insert",a,n,e.outerHeight())}else t.position.forSelection(o),t.popups.show("video.insert")},showLayer:function(e){var o,i,r=t.popups.get("video.insert");if(!K&&!t.opts.toolbarInline){var a=t.$tb.find('.fr-command[data-cmd="insertVideo"]');o=a.offset().left,i=a.offset().top+(t.opts.toolbarBottom?10:a.outerHeight()-10)}t.opts.toolbarInline&&(i=r.offset().top-t.helpers.getPX(r.css("margin-top")),r.hasClass("fr-above")&&(i+=r.outerHeight())),r.find(".fr-layer").removeClass("fr-active"),r.find(".fr-".concat(e,"-layer")).addClass("fr-active"),t.popups.show("video.insert",o,i,0),t.accessibility.focusPopup(r)},refreshByURLButton:function(e){var o=t.popups.get("video.insert");o&&o.find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshEmbedButton:function(e){var o=t.popups.get("video.insert");o&&o.find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshUploadButton:function(e){var o=t.popups.get("video.insert");o&&o.find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:B,insertByURL:function(o){var i=!!document.getElementById("videoPluginAutoplay")&&document.getElementById("videoPluginAutoplay").checked;void 0===o&&(o=(t.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"").trim());var r=null;if(/^http/.test(o)||(o="https://".concat(o)),t.helpers.isURL(o))for(var n=0;n<e.VIDEO_PROVIDERS.length;n++){var s=e.VIDEO_PROVIDERS[n],d="autoplay=1";if(s.html.includes("autoplay=1")&&document.getElementById("videoPluginAutoplay").checked)s.html=s.html,document.getElementById("videoPluginAutoplay").checked=!1;else if(i){var l=s.html.indexOf("{url}")+5;s.html=[s.html.slice(0,l),d,s.html.slice(l)].join(""),i=!1,document.getElementById("videoPluginAutoplay").checked=!1}else(s=e.VIDEO_PROVIDERS[n]).html=s.html.replace(d,"")
;if(s.test_regex.test(o)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(s.provider)){r=o.replace(s.url_regex,s.url_text),r=s.html.replace(/\{url\}/,r);break}}r?a(r):(f(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.linkError",[o]))},insertEmbed:function(o){void 0===o&&(o=t.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==o.length&&e.VIDEO_EMBED_REGEX.test(o)?a(o):(f(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.codeError",[o]))},insert:a,align:function(e){K.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?K.addClass("fr-fvl"):"right"==e&&K.addClass("fr-fvr"):L(K,z(),e),V(),C(),i(),t.selection.clear()},refreshAlign:function(e){if(!K)return!1;e.find(">*").first().replaceWith(t.icon.create("video-align-".concat(k())))},refreshAlignOnShow:function(e,t){K&&t.find('.fr-command[data-param1="'.concat(k(),'"]')).addClass("fr-active").attr("aria-selected",!0)},display:function(e){K.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?K.addClass("fr-dvi"):"block"==e&&K.addClass("fr-dvb"):L(K,e,k()),V(),C(),i(),t.selection.clear()},refreshDisplayOnShow:function(e,t){K&&t.find('.fr-command[data-param1="'.concat(z(),'"]')).addClass("fr-active").attr("aria-selected",!0)},remove:P,hideProgressBar:l,showSizePopup:function(){var e=t.popups.get("video.size");e||(e=I()),l(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var o=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video")),i=o.offset().left+o.outerWidth()/2,r=o.offset().top+o.height();t.popups.show("video.size",i,r,o.height(),!0)},replace:function(){var e=t.popups.get("video.insert");e||(e=r()),t.popups.isVisible("video.insert")||(l(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var o=K.offset().left+K.outerWidth()/2,i=K.offset().top+K.height();t.popups.show("video.insert",o,i,K.outerHeight(),!0)},back:function(){K?(t.events.disableBlur(),K[0].click()):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())},setSize:function(e,o){if(K){var i=t.popups.get("video.size"),r=K.find("iframe, embed, ".concat(K.find("iframe, embed, audio").get(0)?"audio":"video"));r.css("width",e||i.find('input[name="width"]').val()),r.css("height",o||i.find('input[name="height"]').val()),r.get(0).style.width&&r.removeAttr("width"),r.get(0).style.height&&r.removeAttr("height"),i.find("input:focus").blur(),setTimeout(function(){K.trigger("click")},t.helpers.isAndroid()?50:0)}},get:function(){return K},showProgressBar:d,_editVideo:v,setAutoplay:function(){var e;if(K.find("iframe, embed, audio").get(0))(e=K.find("iframe, embed, audio")).get(0).src.includes("autoplay=1")?(M("#FFFFFF"),e.get(0).src=e.get(0).src.replace("&autoplay=1","")):(M("#D6D6D6"),e.get(0).src=e.get(0).src+"&autoplay=1");else if((e=K.find("iframe, embed, video")).get(0).outerHTML.includes("autoplay"))M("#FFFFFF"),e.get(0).outerHTML=e.get(0).outerHTML.replace("autoplay","");else{M("#D6D6D6");var t=e.get(0).outerHTML.indexOf("class")-1;e.get(0).outerHTML=[e.get(0).outerHTML.slice(0,t),"autoplay",e.get(0).outerHTML.slice(t)].join("")}}}},e.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.DefineIcon("insertVideo",{NAME:"video-camera",FA5NAME:"camera",SVG_KEY:"insertVideo"}),e.DefineIcon("videoByURL",{NAME:"link",SVG_KEY:"insertLink"}),e.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.DefineIcon("videoEmbed",{NAME:"code",SVG_KEY:"codeView"}),e.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.DefineIcon("videoUpload",{NAME:"upload",SVG_KEY:"upload"}),e.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.DefineIcon("videoDisplay",{NAME:"star",SVG_KEY:"star"}),e.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.DefineIcon("video-align",{NAME:"align-left",SVG_KEY:"align Left"}),e.DefineIcon("video-align-left",{NAME:"align-left",SVG_KEY:"alignLeft"}),e.DefineIcon("video-align-right",{NAME:"align-right",SVG_KEY:"alignRight"}),e.DefineIcon("video-align-center",{NAME:"align-justify",SVG_KEY:"alignJustify"}),e.DefineIcon("videoAlign",{NAME:"align-center",SVG_KEY:"alignCenter"}),e.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',o=e.COMMANDS.videoAlign.options;for(var i in o)o.hasOwnProperty(i)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'.concat(i,'" title="').concat(this.language.translate(o[i]),'">').concat(this.icon.create("video-align-".concat(i)),'<span class="fr-sr-only">').concat(this.language.translate(o[i]),"</span></a></li>"));return t+"</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.DefineIcon("videoReplace",{NAME:"exchange",FA5NAME:"exchange-alt",SVG_KEY:"replaceImage"}),e.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.DefineIcon("videoRemove",{NAME:"trash",SVG_KEY:"remove"}),e.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.DefineIcon("autoplay",{NAME:"autoplay",SVG_KEY:"autoplay"}),e.RegisterCommand("autoplay",{undo:!1,focus:!1,popup:!0,title:"Autoplay",callback:function(){this.video.setAutoplay()}}),e.DefineIcon("videoSize",{NAME:"arrows-alt",SVG_KEY:"imageSize"}),e.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.DefineIcon("videoBack",{NAME:"arrow-left",SVG_KEY:"back"}),e.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})});