/*!
 * froala_editor v3.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,Object.assign(e.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.PLUGINS.codeView=function(e){function t(){return c?c.getValue():l.val()}function r(){h()&&(c&&c.setSize(null,e.opts.height?e.opts.height:"auto"),e.opts.heightMin||e.opts.height?(e.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",e.opts.heightMin||e.opts.height),l.css("height",e.opts.height)):e.$box.find(".CodeMirror-scroll, .CodeMirror-gutters").css("min-height",""))}function o(){h()&&e.events.trigger("blur")}function n(){h()&&p&&e.events.trigger("focus")}function s(s){l||(function(){l=f('<textarea class="fr-code" tabIndex="-1">'),e.$wp.append(l),l.attr("dir",e.opts.direction),e.$box.hasClass("fr-basic")||(d=f('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'.concat(e.helpers.isMobile()?"":" fr-desktop",'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>')),e.$box.append(d),e.events.bindClick(e.$box,"a.html-switch",function(){e.events.trigger("commands.before",["html"]),i(!1),e.events.trigger("commands.after",["html"])}));var o=function(){return!h()};e.events.on("buttons.refresh",o),e.events.on("copy",o,!0),e.events.on("cut",o,!0),e.events.on("paste",o,!0),e.events.on("destroy",a,!0),e.events.on("html.set",function(){h()&&i(!0)}),e.events.on("codeView.update",r),e.events.on("codeView.toggle",function(){e.$box.hasClass("fr-code-view")&&i()}),e.events.on("form.submit",function(){h()&&(e.html.set(t()),e.events.trigger("contentChanged",[],!0))},!0)}(),!c&&e.opts.codeMirror?((c=e.opts.codeMirror.fromTextArea(l.get(0),e.opts.codeMirrorOptions)).on("blur",o),c.on("focus",n)):(e.events.$on(l,"keydown keyup change input",function(){e.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height="".concat(this.scrollHeight,"px"))}),e.events.$on(l,"blur",o),e.events.$on(l,"focus",n))),e.undo.saveStep(),e.html.cleanEmptyTags(),e.html.cleanWhiteTags(!0),e.core.hasFocus()&&(e.core.isEmpty()||(e.selection.save(),e.$el.find('.fr-marker[data-type="true"]').first().replaceWith('<span class="fr-tmp fr-sm">F</span>'),e.$el.find('.fr-marker[data-type="false"]').last().replaceWith('<span class="fr-tmp fr-em">F</span>')));var g=e.html.get(!1,!0);e.$el.find("span.fr-tmp").remove(),e.$box.toggleClass("fr-code-view",!0);var u,m,b=!1;if(e.core.hasFocus()&&(b=!0,e.events.disableBlur(),e.$el.blur()),g=(g=g.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),e.codeBeautifier&&!g.includes("fr-embedly")&&(g=e.codeBeautifier.run(g,e.opts.codeBeautifierOptions)),c){u=g.indexOf("FROALA-SM"),(m=g.indexOf("FROALA-EM"))<u?u=m:m-=9;var v=(g=g.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,u).length-g.substring(0,u).replace(/\n/g,"").length,w=g.substring(0,m).length-g.substring(0,m).replace(/\n/g,"").length;u=g.substring(0,u).length-g.substring(0,g.substring(0,u).lastIndexOf("\n")+1).length,m=g.substring(0,m).length-g.substring(0,g.substring(0,m).lastIndexOf("\n")+1).length,c.setSize(null,e.opts.height?e.opts.height:"auto"),e.opts.heightMin&&e.$box.find(".CodeMirror-scroll").css("min-height",e.opts.heightMin),c.setValue(g),p=!b,c.focus(),p=!0,c.setSelection({line:v,ch:u},{line:w,ch:m}),c.refresh(),c.clearHistory()}else{u=g.indexOf("FROALA-SM"),m=g.indexOf("FROALA-EM")-9,e.opts.heightMin&&l.css("min-height",e.opts.heightMin),e.opts.height&&l.css("height",e.opts.height),e.opts.heightMax&&l.css("max-height",e.opts.height||e.opts.heightMax),l.val(g.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var M=f(e.o_doc).scrollTop();p=!b,l.focus(),p=!0,l.get(0).setSelectionRange(u,m),f(e.o_doc).scrollTop(M)}e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command").not(s).filter(function(){return e.opts.codeViewKeepActiveButtons.indexOf(f(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),s.addClass("fr-active").attr("aria-pressed",!0),!e.helpers.isMobile()&&e.opts.toolbarInline&&e.toolbar.hide()}function i(r){void 0===r&&(r=!h());var o=e.$tb.find('.fr-command[data-cmd="html"]');r?(e.popups.hideAll(),s(o)):(e.$box.toggleClass("fr-code-view",!1),function(r){var o=t();e.html.set(o),e.$el.blur(),e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command").not(r).removeClass("fr-disabled").attr("aria-disabled",!1),r.removeClass("fr-active").attr("aria-pressed",!1),e.selection.setAtStart(e.el),e.selection.restore(),e.placeholder.refresh(),e.undo.saveStep()}(o),e.events.trigger("codeView.update"))}function a(){h()&&i(!1),c&&c.toTextArea(),l.val("").removeData().remove(),l=null,d&&(d.remove(),d=null)}var l,c,d,f=e.$,h=function(){return e.$box.hasClass("fr-code-view")},p=!1;return{_init:function(){if(e.events.on("focus",function(){var t;e.opts.toolbarContainer&&(t=e.$tb.find('.fr-command[data-cmd="html"]'),h()?(e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command").not(t).filter(function(){return e.opts.codeViewKeepActiveButtons.indexOf(f(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!1),t.addClass("fr-active").attr("aria-pressed",!1)):(e.$tb.find(".fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command").not(t).removeClass("fr-disabled").attr("aria-disabled",!1),t.removeClass("fr-active").attr("aria-pressed",!1)))}),!e.$wp)return!1},toggle:i,isActive:h,get:t}},e.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.DefineIcon("html",{NAME:"code",SVG_KEY:"codeView"})});